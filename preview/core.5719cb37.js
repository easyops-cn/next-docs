"use strict";(self.webpackChunk_next_core_brick_playground=self.webpackChunk_next_core_brick_playground||[]).push([[321],{5766:(e,t,r)=>{r.r(t);var n=r(3028),a=r(4795),o=r(1181),i=r(2534),s=r(9169);r(5745),i.http.interceptors.request.use((e=>{var t,r;return null!==(t=e.options)&&void 0!==t&&null!==(r=t.interceptorParams)&&void 0!==r&&r.ignoreLoadingBar||window.dispatchEvent(new Event("request.start")),e})),i.http.interceptors.response.use((function(e){return window.dispatchEvent(new Event("request.end")),e}),(function(e){return window.dispatchEvent(new Event("request.end")),Promise.reject(e)}));var c=document.querySelector("#global-loading-bar");c.classList.add("rendered");var l=!1,u=0;function p(){var e=u>0;e!==l&&(l=e,c.classList[e?"add":"remove"]("loading"))}window.addEventListener("request.start",(()=>{u++,p()})),window.addEventListener("request.end",(()=>{u>0&&(u--,p())}));var d,f=(0,o.createRuntime)(),v=document.querySelector("#preview-root"),h=document.querySelector("#portal-mount-point"),m=(0,o.unstable_createRoot)(v,{portal:h,scope:"page",unknownBricks:"silent"}),g=i.http.get(window.BOOTSTRAP_FILE,{responseType:"json"}).then((e=>{f.initialize(e)})),y=!1;function b(e){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)((function*(e){y=!0;try{var{type:t,sources:r,options:n}=e;yield S(t,r,n)}finally{if(y=!1,d){var a=d;d=void 0,b(a)}}}))).apply(this,arguments)}window._preview_only_render=(e,t,r)=>{y?d={type:e,sources:t,options:r}:b({type:e,sources:t,options:r})};var E=!1;function S(e,t){return k.apply(this,arguments)}function k(){return k=(0,a.Z)((function*(e,t){var{yaml:r,html:n,javascript:a}=t,{theme:i,context:c,functions:l,templates:u,i18n:p,styleText:d,templatesAreArrayOfYaml:y}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(E||(E=!0,document.body.classList.add("bootstrap-ready"),(0,o.applyTheme)("light"===i?i:"dark-v2")),document.body.classList.remove("bootstrap-error"),"html"===e){(0,o.applyTheme)("light"===i?i:"dark-v2");var b=new DOMParser,w=b.parseFromString(n,"text/html"),S=w.querySelectorAll("*"),k=new Set;for(var A of S)if(A.tagName.includes("-")){var I=A.tagName.toLowerCase();k.add(I)}yield g,yield f.loadBricks(k),v.textContent="",h.textContent="",v.append(...w.body.childNodes);var x=document.createElement("script");x.text=a,x.type="module",v.appendChild(x)}else{var Z=r?(0,s.safeLoad)(r,{schema:s.JSON_SCHEMA,json:!0}):null,O=[].concat(null!=Z?Z:[]);d&&O.push({brick:"style",portal:!0,properties:{textContent:d}});var T=P(c),C=P(l),R=P(u,y),B=P(p);yield g,yield m.render(O,{theme:"light"===i?i:"dark-v2",context:T,functions:C,templates:R,i18n:B})}}catch(e){console.error("Render failed:",e),document.body.classList.add("bootstrap-error"),h.textContent="",v.textContent="Render failed: ".concat(String(e))}})),k.apply(this,arguments)}function P(e,t){return"string"==typeof e?(0,s.safeLoad)(e,{schema:s.JSON_SCHEMA,json:!0}):t?e.map((e=>"string"==typeof e.yaml?(0,n.Z)((0,n.Z)({},(0,s.safeLoad)(e.yaml,{schema:s.JSON_SCHEMA,json:!0})),{},{name:e.name}):e)):e}},6919:(e,t,r)=>{r.r(t),r.d(t,{cook:()=>j,isEvaluable:()=>Q,isTrackAll:()=>ee,precook:()=>W,precookFunction:()=>J,preevaluate:()=>Y,shouldAllowRecursiveEvaluations:()=>X});var n=r(6666);class a{constructor(){(0,n.Z)(this,"VariableEnvironment",void 0),(0,n.Z)(this,"LexicalEnvironment",void 0),(0,n.Z)(this,"Function",void 0)}}class o{constructor(e){(0,n.Z)(this,"OuterEnv",void 0),(0,n.Z)(this,"bindingMap",new Map),this.OuterEnv=e}HasBinding(e){return this.bindingMap.has(e)}CreateMutableBinding(e,t){return this.bindingMap.set(e,{mutable:!0,deletable:t}),h(void 0)}CreateImmutableBinding(e,t){return this.bindingMap.set(e,{strict:t}),h(void 0)}InitializeBinding(e,t){var r=this.bindingMap.get(e);return Object.assign(r,{initialized:!0,value:t}),h(void 0)}SetMutableBinding(e,t,r){var n=this.bindingMap.get(e);if(!n.initialized)throw new ReferenceError("".concat(e," is not initialized"));if(!n.mutable)throw new TypeError("Assignment to constant variable");return n.value=t,h(void 0)}GetBindingValue(e,t){var r=this.bindingMap.get(e);if(!r.initialized)throw new ReferenceError("".concat(e," is not initialized"));return r.value}}class i extends o{}class s extends o{}var c=Symbol.for("SourceNode"),l=Symbol.for("FormalParameters"),u=Symbol.for("ECMAScriptCode"),p=Symbol.for("Environment"),d=Symbol.for("IsConstructor");class f{constructor(e,t,r){(0,n.Z)(this,"Base",void 0),(0,n.Z)(this,"ReferenceName",void 0),(0,n.Z)(this,"Strict",void 0),this.Base=e,this.ReferenceName=t,this.Strict=r}}class v{constructor(e,t){(0,n.Z)(this,"Type",void 0),(0,n.Z)(this,"Value",void 0),this.Type=e,this.Value=t}}function h(e){return new v("normal",e)}var m=Symbol("empty completion");function g(e){var t=new Set,r=e=>{if(Array.isArray(e))for(var n of e)r(n);else if(e)switch(e.type){case"Identifier":return void t.add(e.name);case"VariableDeclaration":return r(e.declarations);case"VariableDeclarator":case"FunctionDeclaration":return r(e.id);case"ArrayPattern":return r(e.elements);case"AssignmentPattern":return r(e.left);case"ObjectPattern":return r(e.properties);case"Property":return r(e.value);case"RestElement":return r(e.argument)}};return r(e),Array.from(t)}function y(e){var t=e=>{if(Array.isArray(e))return e.some(t);if(e)switch(e.type){case"ArrayPattern":return t(e.elements);case"AssignmentPattern":return!0;case"ObjectPattern":return t(e.properties);case"Property":return e.computed||t(e.value);case"RestElement":return t(e.argument)}};return t(e)}function b(e,t){var r=[],n={var:t.var},a=(e,t)=>{if(Array.isArray(e))for(var o of e)a(o,t);else if(e){switch(e.type){case"FunctionDeclaration":return void(Number(!t.var)^Number(t.topLevel)&&r.push(e));case"VariableDeclaration":return void(Number(!t.var)^Number("var"===e.kind)&&r.push(e));case"SwitchCase":return void a(e.consequent,n);case"CatchClause":return void a(e.body,n)}if(t.var)switch(e.type){case"BlockStatement":case"DoWhileStatement":case"WhileStatement":return void a(e.body,n);case"IfStatement":return a(e.consequent,n),void a(e.alternate,n);case"ForStatement":return a(e.init,n),void a(e.body,n);case"ForInStatement":case"ForOfStatement":return a(e.left,n),void a(e.body,n);case"SwitchStatement":return void a(e.cases,n);case"TryStatement":return a(e.block,n),a(e.handler,n),void a(e.finalizer,n)}}};return a(e,t),r}function w(e){return"unresolvable"!==e.Base&&!(e.Base instanceof o)}function E(e,t){return e.Base.InitializeBinding(e.ReferenceName,t)}function S(e,t,r){if(null==t)return e;var n=Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t));for(var a of n)if(!r.has(a)){var o=Object.getOwnPropertyDescriptor(t,a);null!=o&&o.enumerable&&(e[a]=t[a])}return e}function k(e,t){var r="const"===e.kind;for(var n of g(e))r?t.CreateImmutableBinding(n,!0):t.CreateMutableBinding(n,!1)}function P(e){return"normal"===e.Type||"continue"==e.Type}function A(e,t){return e.Value!==m?e:new v(e.Type,t)}function I(e){if(e instanceof v&&(e=e.Value),!(e instanceof f))return e;if("unresolvable"===e.Base)throw new ReferenceError("".concat(e.ReferenceName," is not defined"));return e.Base instanceof o?e.Base.GetBindingValue(e.ReferenceName,e.Strict):e.Base[e.ReferenceName]}function x(e){return"symbol"==typeof e?e:String(e)}function Z(e,t){return e[t]}function O(e,t){if("unresolvable"===e.Base)throw new ReferenceError("".concat(e.ReferenceName," is not defined"));return e.Base instanceof o?e.Base.SetMutableBinding(e.ReferenceName,t,e.Strict):(e.Base[e.ReferenceName]=t,h(void 0))}function T(e){if(t=e,!(Array.isArray(t)||null!=t&&"function"==typeof t[Symbol.iterator]))throw new TypeError("".concat(typeof e," is not iterable"));var t;return e[Symbol.iterator]()}function C(e){if(null==e)throw new TypeError("Cannot destructure properties of undefined or null")}function R(e,t,r){return e?e.HasBinding(t)?new f(e,t,r):R(e.OuterEnv,t,r):new f("unresolvable",t,r)}function B(e,t,r){switch(t){case"+":return e+r;case"-":return e-r;case"/":return e/r;case"%":return e%r;case"*":return e*r;case"**":return e**r;case"==":return e==r;case"===":return e===r;case"!=":return e!=r;case"!==":return e!==r;case">":return e>r;case"<":return e<r;case">=":return e>=r;case"<=":return e<=r}throw new SyntaxError("Unsupported binary operator `".concat(t,"`"))}function _(e,t,r){switch(t){case"+=":case"-=":case"*=":case"/=":case"%=":case"**=":return B(e,t.substr(0,t.length-1),r)}throw new SyntaxError("Unsupported assignment operator `".concat(t,"`"))}function L(e,t){switch(t){case"!":return!e;case"+":return+e;case"-":return-e;case"void":return}throw new SyntaxError("Unsupported unary operator `".concat(t,"`"))}var M=new WeakSet([Function,Object,Function.prototype,Object.prototype,function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}()]);function F(e){if(M.has(e))throw new TypeError("Cannot access reserved objects such as `Function`.")}var N=new WeakSet([Array,Map,Set,URLSearchParams,WeakMap,WeakSet]);function U(e){return N.has(e)||e===Date}function j(e,t){var r,{rules:n,globalVariables:o={},hooks:M={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},N="FunctionDeclaration"!==e.type,j=new i(null),V=new a;V.VariableEnvironment=j,V.LexicalEnvironment=j;var D=[V];for(var[$,q]of Object.entries(o))j.CreateImmutableBinding($,!0),j.InitializeBinding($,q);var W=new WeakMap;function H(e){var t=W.get(e);if(t)return t;var r=e.quasis.map((e=>e.value.raw)),n=e.quasis.map((e=>e.value.cooked));return Object.freeze(r),Object.defineProperty(n,"raw",{value:r,writable:!1,enumerable:!1,configurable:!1}),Object.freeze(n),W.set(e,n),n}function K(e,r){var n,a,o;switch(null===(n=M.beforeEvaluate)||void 0===n||n.call(M,e),e.type){case"ArrayExpression":var s=[];for(var c of e.elements)if(c)if("SpreadElement"===c.type){var l=I(K(c.argument));s.push(...l)}else s.push(I(K(c)));else s.length+=1;return h(s);case"ArrowFunctionExpression":return Fe(e),h(Ze(e));case"BinaryExpression":var u=I(K(e.left)),p=K(e.right).Value,d=I(p);if(N&&"|>"===e.operator){if("function"!=typeof d){var g=t.substring(e.right.start,e.right.end);throw new TypeError("".concat(g," is not a function"))}var y;return p instanceof f&&w(p)&&(y=p.Base),h(d.call(y,u))}return h(B(u,e.operator,d));case"CallExpression":var b=K(e.callee,r).Value,k=I(b);return null==k&&(e.optional||null!=r&&r.skipped)?(r.skipped=!0,h(void 0)):(F(k),ge(k,b,e.arguments,e.callee));case"ChainExpression":return K(e.expression,{});case"ConditionalExpression":return h(I(K(I(K(e.test))?e.consequent:e.alternate)));case"Identifier":return h(G(e.name));case"Literal":if(e.regex){if(null===e.value)throw new SyntaxError("Invalid regular expression: ".concat(e.raw));if(e.regex.flags.includes("u"))throw new SyntaxError("Unsupported unicode flag in regular expression: ".concat(e.raw))}return h(e.value);case"LogicalExpression":var P=I(K(e.left));switch(e.operator){case"&&":return h(P&&I(K(e.right)));case"||":return h(P||I(K(e.right)));case"??":return h(null!=P?P:I(K(e.right)));default:throw new SyntaxError("Unsupported logical operator '".concat(e.operator,"'"))}case"MemberExpression":var x=I(K(e.object,r).Value);if(null==x&&(e.optional||null!=r&&r.skipped))return r.skipped=!0,h(void 0);F(x);var Z=e.computed?ve(x,e.property,!0):he(x,e.property,!0);return F(Z),h(Z);case"NewExpression":return ye(e.callee,e.arguments);case"ObjectExpression":var T={};for(var C of e.properties)if("SpreadElement"===C.type)S(T,I(K(C.argument)),new Set);else{if("init"!==C.kind)throw new SyntaxError("Unsupported object getter/setter");var R=C.computed||"Identifier"!==C.key.type?Re(C.key):C.key.name;if("__proto__"===R)throw new TypeError("Setting '__proto__' property is not allowed");T[R]=I(K(C.value))}return h(T);case"SequenceExpression":var U;for(var j of e.expressions)U=h(I(K(j)));return U;case"TemplateLiteral":var V=[e.quasis[0].value.cooked],D=0;for(var $ of e.expressions){var q=I(K($));V.push(String(q)),V.push(e.quasis[D+=1].value.cooked)}return h(V.join(""));case"TaggedTemplateExpression":var W=K(e.tag).Value,H=I(W);return F(H),ge(H,W,e.quasi,e.tag);case"UnaryExpression":var X=K(e.argument).Value;if(!N&&"delete"===e.operator){if(!(X instanceof f))return h(!0);if(w(X))return h(delete X.Base[X.ReferenceName])}return"typeof"===e.operator?X instanceof f&&"unresolvable"===X.Base?h("undefined"):h(typeof I(X)):h(L(I(X),e.operator))}if(!N)switch(e.type){case"AssignmentExpression":if("="===e.operator){if("ArrayPattern"!==e.left.type&&"ObjectPattern"!==e.left.type){var ne=K(e.left).Value,ae=I(K(e.right));return O(ne,ae),h(ae)}var oe=I(K(e.right));return le(e.left,oe),h(oe)}var se=K(e.left).Value,ce=I(se),ue=I(K(e.right)),pe=_(ce,e.operator,ue);return O(se,pe),h(pe);case"BlockStatement":if(!e.body.length)return h(m);var de=z().LexicalEnvironment,fe=new i(de);me(e.body,fe),z().LexicalEnvironment=fe;var be=Pe(e.body);return z().LexicalEnvironment=de,be;case"BreakStatement":return new v("break",m);case"ContinueStatement":return new v("continue",m);case"EmptyStatement":case"FunctionDeclaration":return h(m);case"DoWhileStatement":return Y(te(e));case"ExpressionStatement":case"TSAsExpression":return K(e.expression);case"ForInStatement":case"ForOfStatement":return Y(re(e));case"ForStatement":return Y(ie(e));case"FunctionExpression":return Fe(e),h(xe(e));case"IfStatement":return I(K(e.test))?(null!==(a=M.beforeBranch)&&void 0!==a&&a.call(M,e,"if"),A(K(e.consequent),void 0)):(null!==(o=M.beforeBranch)&&void 0!==o&&o.call(M,e,"else"),e.alternate?A(K(e.alternate),void 0):h(void 0));case"ReturnStatement":var we;return e.argument&&(we=I(K(e.argument))),new v("return",we);case"ThrowStatement":throw I(K(e.argument));case"UpdateExpression":var Ee=K(e.argument).Value,Se=Number(I(Ee)),ke="++"===e.operator?Se+1:Se-1;return O(Ee,ke),h(e.prefix?ke:Se);case"SwitchCase":return Pe(e.consequent);case"SwitchStatement":var Ae=I(K(e.discriminant)),Ie=z().LexicalEnvironment,Oe=new i(Ie);me(e.cases,Oe),z().LexicalEnvironment=Oe;var Ce=Q(e.cases,Ae);return z().LexicalEnvironment=Ie,Y(Ce);case"TryStatement":var Be;try{Be=K(e.block)}catch(t){if(!e.handler)throw t;var _e;null===(_e=M.beforeEvaluate)||void 0===_e||_e.call(M,e.handler),Be=J(e.handler,t)}finally{if(e.finalizer){var Le=K(e.finalizer);"normal"!==Le.Type&&(Be=Le)}}return Be;case"VariableDeclaration":var Me;for(var Ne of e.declarations)if(Ne.init)if("Identifier"===Ne.id.type){var Ue=G(Ne.id.name),je=I(K(Ne.init));Me="var"===e.kind?O(Ue,je):E(Ue,je)}else{var Ve=I(K(Ne.init));Me=Te(Ne.id,Ve,"var"===e.kind?void 0:z().LexicalEnvironment)}else Me="var"===e.kind?h(m):E(G(Ne.id.name),void 0);return Me;case"WhileStatement":return Y(ee(e))}throw new SyntaxError("Unsupported node type `".concat(e.type,"`"))}function z(){return D[D.length-1]}function G(e,t){return t||(t=z().LexicalEnvironment),R(t,e,!0)}function J(e,t){if(!e.param)return K(e.body);var r=z().LexicalEnvironment,n=new i(r);for(var a of g(e.param))n.CreateMutableBinding(a,!1);z().LexicalEnvironment=n,Te(e.param,t,n);var o=K(e.body);return z().LexicalEnvironment=r,o}function Y(e){return"break"===e.Type?e.Value===m?h(void 0):h(e.Value):e}function Q(e,t){var r,n=e.findIndex((e=>!e.test)),a=n>=0,o=a?e.slice(0,n):e,i=!1;for(var s of o)if(i||(i=X(s,t)),i){var c=K(s);if(c.Value!==m&&(r=c.Value),"normal"!==c.Type)return A(c,r)}if(!a)return h(r);var l=!1,u=e.slice(n+1);if(!i)for(var p of u)if(l||(l=X(p,t)),l){var d=K(p);if(d.Value!==m&&(r=d.Value),"normal"!==d.Type)return A(d,r)}if(l)return h(r);var f=K(e[n]);if(f.Value!==m&&(r=f.Value),"normal"!==f.Type)return A(f,r);for(var v of u){var g=K(v);if(g.Value!==m&&(r=g.Value),"normal"!==g.Type)return A(g,r)}return h(r)}function X(e,t){return t===I(K(e.test))}function ee(e){for(var t;;){if(!I(K(e.test)))return h(t);var r=K(e.body);if(!P(r))return A(r,t);r.Value!==m&&(t=r.Value)}}function te(e){for(var t;;){var r=K(e.body);if(!P(r))return A(r,t);if(r.Value!==m&&(t=r.Value),!I(K(e.test)))return h(t)}}function re(e){var t=e.left,r="VariableDeclaration"===t.type?"var"===t.kind?"varBinding":"lexicalBinding":"assignment",n="lexicalBinding"===r?g(t):[],a="ForInStatement"===e.type?"enumerate":"iterate",o=ne(n,e.right,a);return"normal"!==o.Type?o:ae(t,e.body,o.Value,a,r)}function ne(e,t,r){var n=z(),a=n.LexicalEnvironment;if(e.length>0){var o=new i(a);for(var s of e)o.CreateMutableBinding(s,!1);n.LexicalEnvironment=o}var c=K(t);n.LexicalEnvironment=a;var l=I(c);return"enumerate"===r?null==l?new v("break",m):h(oe(l)):h(T(l))}function ae(e,t,r,n,a){for(var o,s="assignment"===a?e:e.declarations[0].id,c=z().LexicalEnvironment,l="ObjectPattern"===s.type||"ArrayPattern"===s.type;;){var{done:u,value:p}=r.next();if(u)return h(o);var d=void 0,f=void 0;if("lexicalBinding"===a){if(k(e,f=new i(c)),z().LexicalEnvironment=f,!l){var[v]=g(s);d=G(v)}}else l||(d=K(s).Value);l?"assignment"===a?le(s,p):Te(s,p,"varBinding"===a?void 0:f):"lexicalBinding"===a?E(d,p):O(d,p);var y=K(t);if(z().LexicalEnvironment=c,!P(y)){var b=A(y,o);if("enumerate"!==n&&void 0!==r.return){var w=r.return();if(!w||!["object","function"].includes(typeof w))throw new TypeError("Iterator result is not an object")}return b}y.Value!==m&&(o=y.Value)}}function*oe(e){for(var t in e)yield t}function ie(e){var t;if("VariableDeclaration"===(null===(t=e.init)||void 0===t?void 0:t.type)){if("var"===e.init.kind)return K(e.init),se(e.test,e.update,e.body,[]);var r=z().LexicalEnvironment,n=new i(r),a="const"===e.init.kind,o=g(e.init);for(var s of o)a?n.CreateImmutableBinding(s,!0):n.CreateMutableBinding(s,!1);z().LexicalEnvironment=n,K(e.init);var c=a?[]:Array.from(o),l=se(e.test,e.update,e.body,c);return z().LexicalEnvironment=r,l}return e.init&&I(K(e.init)),se(e.test,e.update,e.body,[])}function se(e,t,r,n){var a;for(ce(n);;){if(e&&!I(K(e)))return h(a);var o=K(r);if(!P(o))return A(o,a);o.Value&&(a=o.Value),ce(n),t&&I(K(t))}}function ce(e){if(0!==e.length){var t=z().LexicalEnvironment,r=t.OuterEnv,n=new i(r);for(var a of e){n.CreateMutableBinding(a,!1);var o=t.GetBindingValue(a,!1);n.InitializeBinding(a,o)}z().LexicalEnvironment=n}}function le(e,t){if("ObjectPattern"===e.type)return C(t),e.properties.length>0&&ue(e.properties,t),h(m);var r=T(t);return fe(e.elements,r)}function ue(e,t){var r=new Set;for(var n of e)if("Property"===n.type){var a=n.computed||"Identifier"!==n.key.type?Re(n.key):n.key.name,o="AssignmentPattern"===n.value.type?n.value.left:n.value;if("Identifier"===o.type){var i=G(o.name),s=Z(t,a);"AssignmentPattern"===n.value.type&&void 0===s&&(s=I(K(n.value.right))),O(i,s),r.add(a)}else pe(n.value,t,a),r.add(a)}else de(n,t,r)}function pe(e,t,r){var n,a="AssignmentPattern"===e.type?e.left:e,o="ArrayPattern"===a.type||"ObjectPattern"===a.type;o||(n=K(a).Value);var i,s=Z(t,r);return i="AssignmentPattern"===e.type&&void 0===s?I(K(e.right)):s,o?le(a,i):O(n,i)}function de(e,t,r){return O(K(e.argument).Value,S({},t,r))}function fe(e,t){var r=h(m);for(var n of e)if(n){var a="RestElement"===n.type?n.argument:"AssignmentPattern"===n.type?n.left:n,o="ArrayPattern"===a.type||"ObjectPattern"===a.type,i=void 0;o||(i=K(a).Value);var s=void 0;if("RestElement"!==n.type){var{done:c,value:l}=t.next(),u=c?void 0:l;s="AssignmentPattern"===n.type&&void 0===u?I(K(n.right)):u}else{s=[];for(var p=0;;){var{done:d,value:f}=t.next();if(d)break;s[p]=f,p++}}r=o?le(a,s):O(i,s)}else t.next(),r=h(m);return r}function ve(e,t,r){var n=x(I(K(t)));return new f(e,n,r)}function he(e,t,r){var n=t.name;return new f(e,n,r)}function me(e,t){var r=b(e,{var:!1,topLevel:!1});for(var n of r){var a="VariableDeclaration"===n.type&&"const"===n.kind;for(var o of g(n))a?t.CreateImmutableBinding(o,!0):t.CreateMutableBinding(o,!1);if("FunctionDeclaration"===n.type){var[i]=g(n),s=Ie(n,t);t.InitializeBinding(i,s)}}}function ge(e,r,n,a){var o;r instanceof f&&w(r)&&(o=r.Base);var i=be(n);if("function"!=typeof e){var s=t.substring(a.start,a.end);throw new TypeError("".concat(s," is not a function"))}var c=e.apply(o,i);return F(c),h(c)}function ye(e,r){var n=I(K(e)),a=be(r);if("function"!=typeof n||!1===n[d]){var o=t.substring(e.start,e.end);throw new TypeError("".concat(o," is not a constructor"))}if(!U(n)){var i=t.substring(e.start,e.end);throw new TypeError("".concat(i," is not an allowed constructor"))}return h(new n(...a))}function be(e){var t=[];if(Array.isArray(e))for(var r of e)if("SpreadElement"===r.type){var n=I(K(r.argument));t.push(...n)}else t.push(I(K(r)));else for(var a of(t.push(H(e)),e.expressions))t.push(I(K(a)));return t}function we(e,t){var r;null===(r=M.beforeCall)||void 0===r||r.call(M,e[c]),Ee(e);var n=Se(e,t);if(D.pop(),"return"===n.Type)return n.Value}function Ee(e){var t=new a;t.Function=e;var r=new s(e[p]);return t.VariableEnvironment=r,t.LexicalEnvironment=r,D.push(t),t}function Se(e,t){return ke(e[u],e,t)}function ke(e,t,r){return Ae(t,r),Array.isArray(e)?Pe(e):new v("return",I(K(e)))}function Pe(e){var t=h(m);for(var r of e){var n=K(r);if("normal"!==n.Type)return n;t=A(t,n.Value)}return t}function Ae(e,t){for(var r=z(),a=e[u],o=e[l],s=g(o),c=y(o),p=b(a,{var:!0,topLevel:!0}),d=g(p),f=[],v=[],h=p.length-1;h>=0;h--){var m=p[h];if("FunctionDeclaration"===m.type){Fe(m);var[w]=g(m);f.includes(w)||(f.unshift(w),v.unshift(m))}else if(null!=n&&n.noVar)throw new SyntaxError("Var declaration is not recommended, use `let` or `const` instead")}var E,S=r.LexicalEnvironment;for(var k of s)S.CreateMutableBinding(k,!1);if(_e(o,T(t),S),c)for(var P of(E=new i(S),r.VariableEnvironment=E,d)){E.CreateMutableBinding(P,!1);var A=void 0;s.includes(P)&&!f.includes(P)&&(A=S.GetBindingValue(P,!1)),E.InitializeBinding(P,A)}else{for(var I of d)s.includes(I)||(S.CreateMutableBinding(I,!1),S.InitializeBinding(I,void 0));E=S}var x=E;r.LexicalEnvironment=x;var Z=b(a,{var:!1,topLevel:!0});for(var O of Z)for(var C of g(O))"const"===O.kind?x.CreateImmutableBinding(C,!0):x.CreateMutableBinding(C,!1);for(var R of v){var[B]=g(R),_=Ie(R,x);E.SetMutableBinding(B,_,!1)}}function Ie(e,t){return Oe(e,t,!0)}function xe(e){var t=z().LexicalEnvironment;if(e.id){var r=e.id.name,n=new i(t);n.CreateImmutableBinding(r,!1);var a=Oe(e,n,!0);return n.InitializeBinding(r,a),a}return Oe(e,t,!0)}function Ze(e){return Oe(e,z().LexicalEnvironment,!1)}function Oe(e,t,r){var n=function(){return we(n,arguments)};return Object.defineProperties(n,{[c]:{value:e},[l]:{value:e.params},[u]:{value:"BlockStatement"===e.body.type?e.body.body:e.body},[p]:{value:t},[d]:{value:r}}),n}function Te(e,t,r){switch(e.type){case"Identifier":return Me(e.name,t,r);case"ObjectPattern":return C(t),Ce(e.properties,t,r);case"ArrayPattern":var n=T(t);return _e(e.elements,n,r)}}function Ce(e,t,r){var n=new Set;for(var a of e){if("RestElement"===a.type)return Be(a,t,r,n);if(a.computed||"Identifier"!==a.key.type){var o=Re(a.key);Le(a.value,t,r,o),n.add(o)}else Le(a.value,t,r,a.key.name),n.add(a.key.name)}return h(m)}function Re(e){return x(I(K(e)))}function Be(e,t,r,n){var a=G(e.argument.name,r),o=S({},t,n);return r?E(a,o):O(a,o)}function _e(e,t,r){if(0===e.length)return h(m);var n;for(var a of e)if(a)if("RestElement"===a.type)if("Identifier"===a.argument.type)for(var o=G(a.argument.name,r),i=[],s=0;;){var{done:c,value:l}=t.next();if(c){n=r?E(o,i):O(o,i);break}i[s]=l,s++}else for(var u=[],p=0;;){var{done:d,value:f}=t.next();if(d){n=Te(a.argument,u,r);break}u[p]=f,p++}else{var v="AssignmentPattern"===a.type?a.left:a;switch(v.type){case"ObjectPattern":case"ArrayPattern":var g=void 0,{done:y,value:b}=t.next();y||(g=b),"AssignmentPattern"===a.type&&void 0===g&&(g=I(K(a.right))),n=Te(v,g,r);break;case"Identifier":var w=G(v.name,r),S=void 0,{done:k,value:P}=t.next();k||(S=P),"AssignmentPattern"===a.type&&void 0===S&&(S=I(K(a.right))),n=r?E(w,S):O(w,S)}}else t.next(),n=h(m);return n}function Le(e,t,r,n){if("Identifier"===e.type||"AssignmentPattern"===e.type&&"Identifier"===e.left.type){var a=G("Identifier"===e.type?e.name:e.left.name,r),o=Z(t,n);return"AssignmentPattern"===e.type&&void 0===o&&(o=I(K(e.right))),r?E(a,o):O(a,o)}var i=Z(t,n);return"AssignmentPattern"===e.type&&void 0===i&&(i=I(K(e.right))),Te("AssignmentPattern"===e.type?e.left:e,i,r)}function Me(e,t,r){return r.InitializeBinding(e,t),h(m)}function Fe(e){if(e.async||e.generator)throw new SyntaxError("".concat(e.async?"Async":"Generator"," function is not allowed"));if(N&&!e.expression)throw new SyntaxError("Only an `Expression` is allowed in `ArrowFunctionExpression`'s body")}if(N)return I(K(e));null===(r=M.beforeEvaluate)||void 0===r||r.call(M,e),Fe(e);var[Ne]=g(e);j.CreateImmutableBinding(Ne,!0);var Ue=Ie(e,j);return j.InitializeBinding(Ne,Ue),Ue}var V=r(3028);function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}class ${constructor(){(0,n.Z)(this,"VariableEnvironment",void 0),(0,n.Z)(this,"LexicalEnvironment",void 0)}}class q{constructor(e){(0,n.Z)(this,"OuterEnv",void 0),(0,n.Z)(this,"bindingSet",new Set),this.OuterEnv=e}HasBinding(e){return this.bindingSet.has(e)}CreateBinding(e){this.bindingSet.add(e)}}function W(e){var{expressionOnly:t,visitors:r,withParent:n,hooks:a={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=new Set,i=[],s=new q(null),c=new $;function l(){return i[i.length-1]}function u(e){r&&D(r,e.type)&&r[e.type](e)}function p(e,t,r){for(var n of t)d(e[n],null==r?void 0:r.concat({node:e,key:n}))}function d(e,r){if(Array.isArray(e))e.forEach(((e,t)=>{d(e,r?r.slice(0,-1).concat((0,V.Z)((0,V.Z)({},r[r.length-1]),{},{index:t})):r)}));else if(e){var n,i;switch(null===(n=a.beforeVisit)||void 0===n||n.call(a,e,r),u(e),e.type){case"Identifier":var s;return void(v(e.name)||(null===(s=a.beforeVisitGlobal)||void 0===s||s.call(a,e,r),o.add(e.name)));case"ArrayExpression":case"ArrayPattern":return void p(e,["elements"],r);case"ArrowFunctionExpression":return void w(P(e,l().LexicalEnvironment),r);case"AssignmentPattern":case"BinaryExpression":case"LogicalExpression":return void p(e,["left","right"],r);case"CallExpression":case"NewExpression":return void p(e,["callee","arguments"],r);case"ChainExpression":return void p(e,["expression"],r);case"ConditionalExpression":return void p(e,["test","consequent","alternate"],r);case"MemberExpression":return p(e,["object"],r),void(e.computed&&p(e,["property"],r));case"ObjectExpression":case"ObjectPattern":return void p(e,["properties"],r);case"Property":return e.computed&&p(e,["key"],r),void p(e,["value"],r);case"RestElement":case"SpreadElement":case"UnaryExpression":return void p(e,["argument"],r);case"SequenceExpression":case"TemplateLiteral":return void p(e,["expressions"],r);case"TaggedTemplateExpression":return void p(e,["tag","quasi"],r);case"Literal":return}if(!t)switch(e.type){case"AssignmentExpression":return void p(e,["right","left"],r);case"BlockStatement":if(!e.body.length)return;var c=l(),h=c.LexicalEnvironment,y=new q(h);return m(e.body,y),c.LexicalEnvironment=y,p(e,["body"],r),void(c.LexicalEnvironment=h);case"BreakStatement":case"ContinueStatement":case"EmptyStatement":return;case"CatchClause":var b=l(),E=b.LexicalEnvironment,S=new q(E);return f(e.param,S),b.LexicalEnvironment=S,p(e,["param","body"],r),void(b.LexicalEnvironment=E);case"DoWhileStatement":return void p(e,["body","test"],r);case"ExpressionStatement":case"TSAsExpression":return void p(e,["expression"],r);case"ForInStatement":case"ForOfStatement":var A="VariableDeclaration"===e.left.type&&"var"!==e.left.kind,I=l(),x=I.LexicalEnvironment;if(A){var Z=new q(x);f(e.left,Z),I.LexicalEnvironment=Z}if(p(e,["right"],r),I.LexicalEnvironment=x,A){var O=new q(x);f(e.left,O),I.LexicalEnvironment=O}return p(e,["left","body"],r),void(I.LexicalEnvironment=x);case"ForStatement":var T,C="VariableDeclaration"===(null===(T=e.init)||void 0===T?void 0:T.type)&&"var"!==e.init.kind,R=l(),B=R.LexicalEnvironment;if(C){var _=new q(B);f(e.init,_),R.LexicalEnvironment=_}return p(e,["init","test","body","update"],r),void(R.LexicalEnvironment=B);case"FunctionDeclaration":var[L]=g(e),M=l().LexicalEnvironment,F=P(e,M);return M.CreateBinding(L),void w(F,r);case"FunctionExpression":return void w(k(e),r);case"IfStatement":return void p(e,["test","consequent","alternate"],r);case"ReturnStatement":case"ThrowStatement":case"UpdateExpression":return void p(e,["argument"],r);case"SwitchCase":return void p(e,["test","consequent"],r);case"SwitchStatement":p(e,["discriminant"],r);var N=l(),U=N.LexicalEnvironment,j=new q(U);return m(e.cases,j),N.LexicalEnvironment=j,p(e,["cases"],r),void(N.LexicalEnvironment=U);case"TryStatement":return void p(e,["block","handler","finalizer"],r);case"VariableDeclaration":return void p(e,["declarations"],r);case"VariableDeclarator":return void p(e,["id","init"],r);case"WhileStatement":return void p(e,["test","body"],r)}(null===(i=a.beforeVisitUnknown)||void 0===i?void 0:i.call(a,e,r))||console.warn("Unsupported node type `".concat(e.type,"`"))}}function f(e,t){for(var r of g(e))t.CreateBinding(r)}function v(e){return h(l().LexicalEnvironment,e)}function h(e,t){return!!e&&(e.HasBinding(t)||h(e.OuterEnv,t))}function m(e,t){f(b(e,{var:!1,topLevel:!1}),t)}function w(e,t){E(e),S(e,t),d(e.ECMAScriptCode,null==t?void 0:t.concat({node:e.Function,key:"body"}).concat("BlockStatement"===e.Function.body.type?{node:e.Function.body,key:"body"}:[])),i.pop()}function E(e){var t=new $,r=new q(e.Environment);t.VariableEnvironment=r,t.LexicalEnvironment=r,i.push(t)}function S(e,t){var r,n=l(),a=e.ECMAScriptCode,o=e.FormalParameters,i=y(o),s=g(b(a,{var:!0,topLevel:!0})),c=n.LexicalEnvironment;if(f(o,c),d(o,null==t?void 0:t.concat({node:e.Function,key:"params"})),i)for(var u of(r=new q(c),n.VariableEnvironment=r,s))r.CreateBinding(u);else{for(var p of s)c.CreateBinding(p);r=c}var v=r;n.LexicalEnvironment=v,f(b(a,{var:!1,topLevel:!0}),v)}function k(e){var t=l().LexicalEnvironment;if(!e.id)return P(e,t);var r=e.id.name,n=new q(t);return n.CreateBinding(r),P(e,n)}function P(e,t){return{Function:e,FormalParameters:e.params,ECMAScriptCode:"BlockStatement"===e.body.type?e.body.body:e.body,Environment:t}}return c.VariableEnvironment=s,c.LexicalEnvironment=s,i.push(c),d(e,n?[]:void 0),o}var H=r(2159),K=r(1874);function z(e){var{typescript:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,K.Qc)(e,{plugins:["estree",t&&"typescript"].filter(Boolean),strictMode:!0,attachComment:!1}),n=r.program.body,a=t?[]:n;if(t)for(var o of n)if(o.type.startsWith("TS")){if(/Enum|Import|Export/.test(o.type))throw new SyntaxError("Unsupported TypeScript syntax: ".concat(o.type))}else a.push(o);if(0===a.length)throw new SyntaxError("Function declaration not found");if(a.length>1||"FunctionDeclaration"!==a[0].type)throw new SyntaxError("Expect a single function declaration at top level, but received: ".concat(a.map((e=>'"'.concat(e.type,'"'))).join(", ")));return a[0]}var G=["typescript"];function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{typescript:r}=t,n=(0,H.Z)(t,G),a=z(e,{typescript:r}),o=W(a,n);return{function:a,attemptToVisitGlobals:o}}function Y(e,t){var r=[],n=e.replace(/^\s*<%[~=]?\s|\s%>\s*$/g,(e=>(r.push(e),""))),a=function(e){return(0,K.BJ)(e,{plugins:["estree",["pipelineOperator",{proposal:"minimal"}]],attachComment:!1})}(n);return{expression:a,attemptToVisitGlobals:W(a,(0,V.Z)((0,V.Z)({},t),{},{expressionOnly:!0})),source:n,prefix:r[0],suffix:r[1]}}function Q(e){return/^\s*<%[~=]?\s/.test(e)&&/\s%>\s*$/.test(e)}function X(e){return/^\s*<%~\s/.test(e)}function ee(e){return/^\s*<%=\s.*\s%>\s*$/.test(e)}},2424:(e,t,r)=>{r.r(t),r.d(t,{HttpAbortError:()=>m,HttpFetchError:()=>f,HttpParseError:()=>h,HttpResponseError:()=>v,createHttpInstance:()=>L,defaultAdapter:()=>O,fetch:()=>n,getUrlWithParams:()=>x,http:()=>_,isHttpAbortError:()=>P});var n=(e,t)=>{var r=new Request(e,Object.assign({credentials:"same-origin"},t));return self.fetch(r)},a=r(5866),o=r(3395),i=r(6666),s=r(687),c=r(6171),l=r(381),u=r(3028),p=r(2159),d=r(4795);class f extends Error{constructor(e){super(e),this.name="HttpFetchError",Error.captureStackTrace&&Error.captureStackTrace(this,f)}}class v extends Error{constructor(e,t){super(e.statusText),(0,i.Z)(this,"response",void 0),(0,i.Z)(this,"responseJson",void 0),this.name="HttpResponseError",Error.captureStackTrace&&Error.captureStackTrace(this,v),this.response=e,this.responseJson=t}}class h extends Error{constructor(e){super(e.statusText),(0,i.Z)(this,"response",void 0),this.name="HttpParseError",Error.captureStackTrace&&Error.captureStackTrace(this,h),this.response=e}}class m extends Error{constructor(e){super(e),this.name="HttpAbortError"}}class g{constructor(){(0,i.Z)(this,"handlers",[])}use(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}forEach(e){this.handlers.forEach((t=>{null!==t&&e(t)}))}}var y=["params","responseType","interceptorParams","observe","noAbortOnRouteChange","useCache"],b=["params","responseType","interceptorParams","observe","noAbortOnRouteChange","useCache","headers"],w=["body","method"];function E(e){return null==e}var S=document.querySelector("base"),k=S?S.href:location.origin+"/",P=e=>e instanceof DOMException&&20===e.code,A=(e,t)=>({error:e,config:t}),I=function(){var e=(0,d.Z)((function*(e,t,r){return new Promise(function(){var a=(0,d.Z)((function*(a,o){var i;r.url=e;var{responseType:s}=r.options||{};s||(s="json");try{i=yield n(e,t)}catch(e){return void o(A(P(e)?new m(e.toString()):new f(e.toString()),r))}if(i.ok){var c;try{c=yield i[s]()}catch(e){return void o(A(P(e)?new m(e.toString()):new h(i),r))}a({config:r,status:i.status,statusText:i.statusText,headers:i.headers,data:c})}else{var l;try{l=yield i.json()}catch(e){}o(A(new v(i,l),r))}}));return function(e,t){return a.apply(this,arguments)}}())}));return function(t,r,n){return e.apply(this,arguments)}}(),x=(e,t)=>{if(t){var r=new URL(e,k);t instanceof URLSearchParams?t.forEach((function(e,t){r.searchParams.append(t,e)})):Object.entries(t).forEach((e=>{var[t,n]=e;Array.isArray(n)?n.forEach((e=>{r.searchParams.append(t,E(e)?"":e)})):r.searchParams.append(t,E(n)?"":n)}));var{href:n}=r;return n.startsWith(k)?n.substr(k.length):n}return e},Z=(e,t)=>{if(void 0!==e){var r=new Headers(t||{}),n="Content-Type",a=e;return r.has(n)||("string"==typeof e?r.set(n,"application/x-www-form-urlencoded"):e instanceof FormData||(r.set(n,"application/json"),a=JSON.stringify(e))),{body:a,headers:r}}return{headers:t}},O=e=>{var{url:t,method:r,data:n}=e;return["DELETE","GET","HEAD"].includes(e.method)?((e,t,r)=>{var n=r.options||{},{params:a,responseType:o,interceptorParams:i,observe:s,noAbortOnRouteChange:c,useCache:l}=n,d=(0,p.Z)(n,y);return I(x(t,a),(0,u.Z)((0,u.Z)({},d),{},{method:e}),r)})(r,t,e):((e,t,r,n)=>{var a=n.options||{},{params:o,responseType:i,interceptorParams:s,observe:c,noAbortOnRouteChange:l,useCache:d,headers:f}=a,v=(0,p.Z)(a,b);return I(x(t,o),(0,u.Z)((0,u.Z)({},v),{},{method:e},Z(r,f)),n)})(r,t,n,e)},T=new WeakMap,C=new WeakSet;class R{constructor(e){var t=this;(0,a.Z)(this,C),(0,i.Z)(this,"interceptors",void 0),(0,o.Z)(this,T,{writable:!0,value:O}),(0,i.Z)(this,"request",function(){var e=(0,d.Z)((function*(e,r,n){var a=r||{},{body:o,method:i}=a,s=(0,p.Z)(a,w);return(0,c.Z)(t,C,B).call(t,{url:e,data:o,method:i||"GET",options:(0,u.Z)((0,u.Z)({},n||{}),s)})}));return function(t,r,n){return e.apply(this,arguments)}}()),(0,i.Z)(this,"simpleRequest",(function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,c.Z)(t,C,B).call(t,{url:r,method:e,options:n})})),(0,i.Z)(this,"requestWithBody",(function(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,c.Z)(t,C,B).call(t,{url:r,method:e,data:n,options:a})})),this.interceptors={request:new g,response:new g},null!=e&&e.adapter&&(0,l.Z)(this,T,e.adapter)}getUrlWithParams(e,t){return x(e,t)}getBodyAndHeaders(e,t){return Z(e,t)}get(e,t){return(0,c.Z)(this,C,B).call(this,{url:e,method:"GET",options:t})}delete(e,t){return(0,c.Z)(this,C,B).call(this,{url:e,method:"DELETE",options:t})}head(e,t){return(0,c.Z)(this,C,B).call(this,{url:e,method:"HEAD",options:t})}post(e,t,r){return(0,c.Z)(this,C,B).call(this,{url:e,method:"POST",data:t,options:r})}put(e,t,r){return(0,c.Z)(this,C,B).call(this,{url:e,method:"PUT",data:t,options:r})}patch(e,t,r){return(0,c.Z)(this,C,B).call(this,{url:e,method:"PATCH",data:t,options:r})}}function B(e){var t=[],r=Promise.resolve(e);for(this.interceptors.request.forEach((e=>{t.push(e.fulfilled,e.rejected)})),t.push((e=>(0,s.Z)(this,T).call(this,e)),void 0),this.interceptors.response.forEach((e=>{t.push(e.fulfilled,e.rejected)})),t.push((e=>{var t;return"response"===(null===(t=e.config.options)||void 0===t?void 0:t.observe)?e:e.data}),(e=>Promise.reject(e.error)));t.length;)r=r.then(t.shift(),t.shift());return r}var _=new R;function L(e){_=new R(e)}},4034:(e,t,r)=>{r.r(t),r.d(t,{i18n:()=>p,i18nText:()=>u,initializeI18n:()=>c});var n=r(366),a=r(3499),o=r(5366),i=!1,s=new Set;function c(e,t){if(i||(i=!0,a.i18n.use(o.default).init({fallbackLng:"zh",debug:!1,supportedLngs:["zh","en"],nonExplicitSupportedLngs:!0,interpolation:{escapeValue:!1},react:{useSuspense:!1},compatibilityJSON:"v3",resources:{}})),e&&t&&!s.has(e))for(var[r,n]of(s.add(e),Object.entries(t)))a.i18n.addResourceBundle(r,e,n)}var l=r(9686);function u(e){var t;if(e){var r=null!==(t=a.i18n.language)&&void 0!==t?t:"zh-CN";if((0,l.hasOwnProperty)(e,r))return e[r];var n=r.split("-")[0];if(n!==r)return(0,l.hasOwnProperty)(e,n)?e[n]:void 0;var o="".concat(n,"-");for(var i of Object.keys(e))if(i.startsWith(o))return e[i]}}var p=n.default},9165:(e,t,r)=>{r.r(t),r.d(t,{inject:()=>A,transform:()=>P,transformAndInject:()=>I});var n=r(5178),a=r(5637),o=new Map(Array.from(Object.entries(a.q)));function i(e,t){if(0===t.length)return e;var r=e;for(var n of t){var a=o.get(n.identifier);if(!a)return void console.warn("Unknown pipe: ".concat(n.identifier));r=a(r,...n.parameters)}return r}var s=function(e){return e[e.Initial=0]="Initial",e[e.ExpectField=1]="ExpectField",e[e.ExpectOptionalBeginDefault=2]="ExpectOptionalBeginDefault",e[e.ExpectDefaultValue=3]="ExpectDefaultValue",e[e.ExpectOptionalBeginPipe=4]="ExpectOptionalBeginPipe",e[e.ExpectPipeIdentifier=5]="ExpectPipeIdentifier",e[e.ExpectOptionalBeginPipeParameter=6]="ExpectOptionalBeginPipeParameter",e[e.ExpectPipeParameter=7]="ExpectPipeParameter",e[e.ExpectPlaceholderEnd=8]="ExpectPlaceholderEnd",e}({}),c=function(e){return e.Raw="Raw",e.BeginPlaceHolder="BeginPlaceHolder",e.Field="Field",e.BeginDefault="BeginDefault",e.LiteralString="LiteralString",e.BeginPipe="BeginPipe",e.PipeIdentifier="PipeIdentifier",e.BeginPipeParameter="BeginPipeParameter",e.EndPlaceHolder="EndPlaceHolder",e.JsonValue="JsonValue",e}({}),l=function(e){return e[e.Array=0]="Array",e[e.Object=1]="Object",e[e.String=2]="String",e[e.Others=3]="Others",e}({});function u(e){return new RegExp("(".concat([].concat(e).map((e=>(0,n.escapeRegExp)(e))).join("|"),")\\{"))}function p(e){var t,r=k(e),n=null===(t=r.match(e.beginPlaceholder))||void 0===t?void 0:t[0],a=n?r.indexOf(n):-1;if(a>=0&&n&&"{"!==r.charAt(a+n.length)){var o=e.cursor+a;a>0&&e.tokens.push({type:c.Raw,value:r.substring(0,a)}),e.tokens.push({type:c.BeginPlaceHolder,loc:{start:o,end:o+n.length},value:n.substring(0,n.length-1)}),e.cursor+=a+n.length,e.status=s.ExpectField}else e.tokens.push({type:c.Raw,value:r}),e.cursor=e.raw.length}function d(e){e.cursor+=k(e).match(/^[ \r\n\t]*/)[0].length}function f(e){var[t]=k(e).match(/^(?:[\*\x2D\.0-9A-\[\]_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*/);e.tokens.push({type:c.Field,value:t}),e.cursor+=t.length,e.status=s.ExpectOptionalBeginDefault}function v(e){"="===k(e).charAt(0)?(e.tokens.push({type:c.BeginDefault}),e.cursor+=1,e.status=s.ExpectDefaultValue):e.status=s.ExpectOptionalBeginPipe}function h(e){S(e,s.ExpectOptionalBeginPipe)}function m(e){"|"===k(e).charAt(0)?(e.tokens.push({type:c.BeginPipe}),e.cursor+=1,e.status=s.ExpectPipeIdentifier):e.status=s.ExpectPlaceholderEnd}function g(e){var t=k(e).match(/^[a-zA-Z]\w*/);if(!t)throw new Error("Expected a pipe identifier at index ".concat(e.cursor," near: ").concat(JSON.stringify(e.raw.substring(e.cursor))));var r=t[0];e.tokens.push({type:c.PipeIdentifier,value:r}),e.cursor+=r.length,e.status=s.ExpectOptionalBeginPipeParameter}function y(e){":"===k(e).charAt(0)?(e.tokens.push({type:c.BeginPipeParameter}),e.cursor+=1,e.status=s.ExpectPipeParameter):e.status=s.ExpectOptionalBeginPipe}function b(e){S(e,s.ExpectOptionalBeginPipeParameter)}function w(e){if("}"!==k(e).charAt(0))throw new Error("Expected a placeholder end '}' at index ".concat(e.cursor," near: ").concat(JSON.stringify(e.raw.substring(e.cursor))));e.tokens.push({type:c.EndPlaceHolder,loc:{start:e.cursor,end:e.cursor+1}}),e.cursor+=1,e.status=s.Initial}var E=new Map([["false",!1],["null",null],["true",!0]]);function S(e,t){var r=k(e);if(/[0-9[{"]/.test(r.charAt(0))||/-[0-9]/.test(r.substring(0,2)))!function(e,t){for(var r=k(e),n=r.charAt(0),a="["===n?l.Array:"{"===n?l.Object:'"'===n?l.String:l.Others,o=0,i=0,s=0,u=!1,p=!1,d=!1;o<r.length;){var f=r.charAt(o);if(p)p=!1;else if(u)'"'===f?u=!1:"\\"===f&&(p=!0);else switch(f){case"[":s+=1;break;case"{":i+=1;break;case"]":s-=1;break;case"}":i-=1;break;case'"':u=!0}switch(o+=1,a){case l.Array:d=!s;break;case l.Object:d=!i;break;case l.String:d=!u;break;default:d=o<r.length&&/[^a-z0-9E.+-]/.test(r.charAt(o))}if(d)break}if(!d)throw new Error("Failed to match a JSON value at index ".concat(e.cursor," near: ").concat(JSON.stringify(e.raw.substring(e.cursor))));e.tokens.push({type:c.JsonValue,value:JSON.parse(r.substring(0,o))}),e.cursor+=o,e.status=t}(e,t);else{var[n]=k(e).match(/^(?:[\x2D0-9A-Z_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*/);E.has(n)?e.tokens.push({type:c.JsonValue,value:E.get(n)}):e.tokens.push({type:c.LiteralString,value:n}),e.cursor+=n.length,e.status=t}}function k(e){return e.raw.substring(e.cursor)}function P(e,t){return x(e,"@",t)}function A(e,t){return x(e,"$",t)}function I(e,t){return x(e,["@","$"],t)}function x(e,t,r){if(!function(e,t){return u(t).test(e)}(e,t))return e;var a,o,l=(a=r.data,function(e){var t=e.field?(0,n.get)(a,e.field):a;return void 0===t&&(t=e.defaultValue),i(t,e.pipes)}),E=function(e,t){return function(r){var a,o,s=r.field.match(/^(?:(QUERY(?:_ARRAY)?|EVENT|query|event|APP|HASH|ANCHOR|SYS|FLAGS|CTX)\.)?(.+)$/);if(!s)return t.substring(r.loc.start,r.loc.end);var c,[,l,u]=s;!l&&/^[A-Z_]+$/.test(u)&&(l=u,u="*");var p={SYS:"sys",FLAGS:"flags"};switch(l){case"QUERY":case"query":c="*"===u?e.query:e.query.has(u)?e.query.get(u):void 0;break;case"QUERY_ARRAY":c=e.query.has(u)?e.query.getAll(u):void 0;break;case"EVENT":case"event":if(void 0===e.event)return t.substring(r.loc.start,r.loc.end);c="*"===u?e.event:(0,n.get)(e.event,u);break;case"APP":c="*"===u?null!==(a=e.overrideApp)&&void 0!==a?a:e.app:(0,n.get)(null!==(o=e.overrideApp)&&void 0!==o?o:e.app,u);break;case"HASH":c=e.location.hash;break;case"SYS":case"FLAGS":c="*"===u?e[p[l]]:(0,n.get)(e[p[l]],u);break;case"ANCHOR":var d=e.location.hash?e.location.hash.substr(1):null;c="*"===u?d:(0,n.get)(d,u);break;case"CTX":var f=t.substring(r.loc.start,r.loc.end);return console.error('CTX is not supported in placeholder any more: "'.concat(f,'"')),f;default:if(!e.match)return t.substring(r.loc.start,r.loc.end);c=e.match.params[u]}return void 0===c&&(c=r.defaultValue),i(c,r.pipes)}}(r,e);return o=function(e,t){return function(e){var t,r={type:"InjectableString",elements:[]};function n(r){return r===e[0].type&&(t=e.shift(),!0)}function a(r){if(t=e.shift(),Array.isArray(r)?!r.includes(t.type):r!==t.type)throw new Error("Expected token: ".concat(r,", received token: ").concat(t.type))}for(;e.length>0;)if(n(c.Raw))r.elements.push({type:"RawString",value:t.value});else{a(c.BeginPlaceHolder);var o=t.loc.start,i=t.value;a(c.Field);var s={type:"Placeholder",symbol:i,field:t.value,defaultValue:void 0,pipes:[],loc:{start:o,end:o}};for(r.elements.push(s),n(c.BeginDefault)&&(a([c.JsonValue,c.LiteralString]),s.defaultValue=t.value);n(c.BeginPipe);){a(c.PipeIdentifier);var l={type:"PipeCall",identifier:t.value,parameters:[]};for(s.pipes.push(l);n(c.BeginPipeParameter);)a([c.JsonValue,c.LiteralString]),l.parameters.push(t.value)}a(c.EndPlaceHolder),s.loc.end=t.loc.end}return r}(function(e,t){for(var r={beginPlaceholder:u(t),raw:e,cursor:0,status:s.Initial,tokens:[]};r.cursor<e.length;)switch(r.status){case s.Initial:p(r);break;case s.ExpectField:d(r),f(r);break;case s.ExpectOptionalBeginDefault:d(r),v(r);break;case s.ExpectDefaultValue:d(r),h(r);break;case s.ExpectOptionalBeginPipe:d(r),m(r);break;case s.ExpectPipeIdentifier:d(r),g(r);break;case s.ExpectOptionalBeginPipeParameter:d(r),y(r);break;case s.ExpectPipeParameter:d(r),b(r);break;case s.ExpectPlaceholderEnd:d(r),w(r)}if(r.status!==s.Initial)throw new Error("Expected a placeholder end '}' at the end");return r.tokens}(e,t))}(e,t).elements.map((e=>"RawString"===e.type?e.value:"$"===e.symbol?E(e):l(e))),1===o.length?o[0]:o.join("")}},3163:(e,t,r)=>{r.r(t),r.d(t,{enqueueStableLoadBricks:()=>f,enqueueStableLoadProcessors:()=>v,flushStableLoadBricks:()=>d,loadBricksImperatively:()=>h,loadProcessorsImperatively:()=>g,loadScript:()=>a,loadSharedModule:()=>s});var n=new Map;function a(e,t){if(Array.isArray(e))return Promise.all(e.map((e=>a(e,t))));var r=t?"".concat(t).concat(e):e,o=n.get(r);if(o)return o;var i=new Promise(((e,t)=>{var n=()=>{window.dispatchEvent(new Event("request.end"))},a=document.createElement("script");a.src=r,a.type="text/javascript",a.async=!0,a.onload=()=>{e(r),n()},a.onerror=e=>{t(e),n()};var o=document.currentScript||document.getElementsByTagName("script")[0];o.parentNode.insertBefore(a,o),window.dispatchEvent(new Event("request.start"))}));return n.set(r,i),i}var o,i=r(4795);function s(e,t){return c.apply(this,arguments)}function c(){return(c=(0,i.Z)((function*(e,t){yield r.I("default");var n=window[e];return yield n.init(r.S.default),(yield n.get(t))()}))).apply(this,arguments)}var l,u=!1,p=new Promise((e=>{o=e}));function d(){u||o()}function f(e,t){return A(k("bricks",e,t))}function v(e,t){return A(k("processors",e,t))}function h(e,t){return m.apply(this,arguments)}function m(){return(m=(0,i.Z)((function*(e,t){var r=k("bricks",e,t);return d(),A(r)}))).apply(this,arguments)}function g(e,t){var r=k("processors",e,t);return d(),A(r)}var y="v2-adapter.load-bricks";function b(e,t,r){var n=new Map,a=new Set,o=t=>{var i;if(!a.has(t)){var s,c,l;if(a.add(t),"processors"===e||t.includes(".")){[c,l]=t.split(".");var u="bricks/".concat("processors"===e?c.replace(/[A-Z]/g,(e=>"-".concat(e[0].toLocaleLowerCase()))).replace(/_[0-9]/g,(e=>"-".concat(e[1]))):c);s=r.get(u)}else for(var p of(l=t,r.values())){var d;if(null!==(d=p.elements)&&void 0!==d&&d.some((e=>e===l))){s=p;break}}if(!s)throw new Error("Package for ".concat(t," not found."));var f=n.get(s);f||(f=[],n.set(s,f)),f.push(l);var v=null===(i=s.dependencies)||void 0===i?void 0:i[t];if(v)for(var h of v)o(h)}};for(var i of t)o(i);return n}function w(e,t,r){return E.apply(this,arguments)}function E(){return(E=(0,i.Z)((function*(e,t,r){var n="".concat("processors"===e?"./processors/":"./").concat(r);try{yield s(t,n)}catch(r){throw console.error(r),new Error("Load ".concat(e,' of "').concat(t.split("/").pop(),".").concat(n.split("/").pop(),'" failed'))}}))).apply(this,arguments)}function S(e,t,r){return t.map(function(){var t=(0,i.Z)((function*(t){var n;return yield a(t.filePath,null!==(n=window.PUBLIC_ROOT)&&void 0!==n?n:""),yield p,Promise.all(r.get(t).map((r=>w(e,t.id,r))))}));return function(e){return t.apply(this,arguments)}}())}function k(e,t,r){return P.apply(this,arguments)}function P(){return P=(0,i.Z)((function*(e,t,r){var n=new Map;for(var s of r){var c,p=null!==(c=s.id)&&void 0!==c?c:x(s.filePath);n.set(p,s)}var d,f,v=b(e,t,n),h=[],m=[];for(var g of v.keys())g.id?"bricks/basic"===g.id?d=g:m.push(g):(h.push(g),(f=n.get("bricks/v2-adapter"))||console.error("Using v2 bricks, but v2-adapter not found"));var E,k=f,P=d;if(P){var A,I=a(P.filePath,null!==(A=window.PUBLIC_ROOT)&&void 0!==A?A:"");u||(u=!0,I.then((()=>Promise.resolve())).then(o)),E=I.then((()=>Promise.all(v.get(P).map((t=>w(e,P.id,t))))))}var Z=[E].concat(S(e,m,v));if(k&&h.length>0){if(!l){var O=b("bricks",[y],n),T=[...O.keys()],C=function(){var e=(0,i.Z)((function*(){return yield Promise.all(S("bricks",T,O)),document.createElement(y)}));return function(){return e.apply(this,arguments)}}();l=C()}Z.push(l.then((t=>Promise.all(h.map((n=>{var a=x(n.filePath).split("/")[1];return t.resolve(k.filePath,n.filePath,"bricks"===e?v.get(n).map((e=>"".concat(a,".").concat(e))):[],n.dll,r)}))))))}yield Promise.all(Z)})),P.apply(this,arguments)}function A(e){return I.apply(this,arguments)}function I(){return(I=(0,i.Z)((function*(e){window.dispatchEvent(new Event("request.start"));try{yield e}finally{window.dispatchEvent(new Event("request.end"))}}))).apply(this,arguments)}function x(e){return e.split("/").slice(0,2).join("/")}},8208:(e,t,r)=>{r.r(t),r.d(t,{Dialog:()=>Wt,Notification:()=>Qt,StoryboardFunctionRegistryFactory:()=>z,__secret_internals:()=>n,applyTheme:()=>L,authenticate:()=>Ro,batchSetAppsLocalTheme:()=>M,checkIfByTransform:()=>ct,checkIfOfComputed:()=>ot,createHistory:()=>ge,createRuntime:()=>Sa,customProcessors:()=>g,customTemplates:()=>Et,fetchByProvider:()=>Mo,getAuth:()=>Bo,getBasePath:()=>$,getCssPropertyValue:()=>D,getCurrentMode:()=>j,getCurrentTheme:()=>_,getHistory:()=>ye,getPageInfo:()=>An,getRuntime:()=>ka,handleHttpError:()=>Yt,httpErrorToString:()=>Ht,isLoggedIn:()=>Lo,isUnauthenticatedError:()=>Kt,logout:()=>_o,matchPath:()=>Tt,registerWidgetFunctions:()=>_a,registerWidgetI18n:()=>E,unstable_createRoot:()=>No});var n={};r.r(n),r.d(n,{legacyDoTransform:()=>$o,mountUseBrick:()=>Vo,renderUseBrick:()=>Uo,unmountUseBrick:()=>Do,updateSnippetPreviewSettings:()=>Go,updateStoryboard:()=>qo,updateStoryboardByRoute:()=>Wo,updateStoryboardBySnippet:()=>zo,updateStoryboardByTemplate:()=>Ho,updateTemplatePreviewSettings:()=>Ko});var a=r(3028),o=r(4795),i=r(5178),s=r(3105),c=r(485),l=r(3046),u=r(9686),p=r(8602),d=r(3746),f=r(8925),v=r(3395),h=r(687),m=new WeakMap,g=new class{constructor(){(0,v.Z)(this,m,{writable:!0,value:new Map})}define(e,t){var[r,n]=e.split("."),a=(0,h.Z)(this,m).get(r);if(a||(a=new Map,(0,h.Z)(this,m).set(r,a)),a.has(n))throw new Error('Custom processor of "'.concat(e,'" already registered'));a.set(n,t)}get(e){return(0,h.Z)(this,m).get(e)}},y=r(3499);function b(e){var{app:t,meta:r}=e;if(null!=r&&r.i18n){var n=w("app",t.id),a=[];return Object.entries(r.i18n).forEach((e=>{var[t,r]=e;y.i18n.addResourceBundle(t,n,r),a.push(t)})),()=>{for(var e of a)y.i18n.removeResourceBundle(e,n)}}}function w(e,t){return"".concat(e,"/").concat(t)}function E(e,t){var r=w("widget",e);Object.entries(t).forEach((e=>{var[t,n]=e;y.i18n.addResourceBundle(t,r,n)}))}function S(e){return y.i18n.getFixedT(null,w("widget",e))}function k(e,t){return{get(r){var n;return"".concat(null!==(n=window.PUBLIC_ROOT)&&void 0!==n?n:"","bricks/").concat(e,"/").concat(window.PUBLIC_ROOT_WITH_VERSION&&t?"".concat(t,"/"):"","dist/assets/").concat(r)}}}function P(){return window.__BRICK_NEXT_DEVTOOLS_HOOK__}var A=()=>{throw new Error("Can't modify read-only proxy object")},I={set:A,defineProperty:A,deleteProperty:A,setPrototypeOf:A};function x(e){return new Proxy(e,I)}function Z(e){var{get:t,ownKeys:r}=e;return P()?x(Object.fromEntries(r(null).map((e=>[e,t(null,e,null)])))):new Proxy(Object.freeze({}),{get:t})}var O="light",T=new u.JsonStorage(localStorage),C="apps-theme";function R(e){if("dark"!==e&&"light"!==e&&"dark-v2"!==e)throw new Error("Unsupported theme: ".concat(e));O=e}function B(){return O}function _(){return document.documentElement.dataset.theme}function L(e){e?R(e):e=B(),e!==_()&&(document.documentElement.dataset.theme=e,window.dispatchEvent(new CustomEvent("theme.change",{detail:e})))}function M(e){T.setItem(C,(0,a.Z)((0,a.Z)({},F()),e))}function F(){var e,t;try{t=T.getItem(C)}catch(e){console.error("JSON parse error inside `getLocalAppsTheme()`")}return null!==(e=t)&&void 0!==e?e:{}}var N="default";function U(e){if("dashboard"!==e&&"default"!==e)throw new Error("Unsupported mode: ".concat(e));N=e}function j(){return document.documentElement.dataset.mode}function V(e){e?U(e):e=N,e!==j()&&(document.documentElement.dataset.mode=e,window.dispatchEvent(new CustomEvent("mode.change",{detail:e})))}function D(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return r&&(null===(t=window.getComputedStyle(r))||void 0===t?void 0:t.getPropertyValue(e))||""}function $(){var e=document.querySelector("base");return e?e.getAttribute("href"):"/"}function q(e,t){var r={};for(var n of e){var a=W(n,t);void 0!==a&&(r[n]=a)}return r}function W(e,t){var r,n,{collectCoverage:a,widgetId:o,widgetVersion:s,app:c,appendI18nNamespace:l,storyboardFunctions:u,isStoryboardFunction:p}=t;switch(e){case"BASE_URL":return a?"/next":$().replace(/\/$/,"");case"FN":return u;case"IMG":return a?{get:e=>"mock/images/".concat(e)}:o?k(o,s):(r=c.id,n=c.isBuildPush,{get:e=>n?"api/gateway/object_store.object_store.GetObject/api/v1/objectStore/bucket/next-builder/object/".concat(e):"".concat(window.APP_ROOT?"".concat(window.APP_ROOT,"-/"):"","micro-apps/").concat(r,"/images/").concat(e)});case"I18N":return a?i.identity:o?S(o):y.i18n.getFixedT(null,[l,w("app",c.id)].filter(Boolean));case"I18N_TEXT":return a?H:y.i18nText;case"PERMISSIONS":return x({check:a?K:To});case"THEME":return x({getTheme:a?()=>"light":B});case"console":return p?x(console):void 0;case"location":return a?{href:"http://localhost:3000/functions/test",origin:"http://localhost:3000",host:"localhost:3000",hostname:"localhost"}:{href:location.href,origin:location.origin,host:location.host,hostname:location.hostname}}}function H(e){return null==e?void 0:e.en}function K(){return!0}function z(){var e,{widgetId:t,widgetVersion:r,collectCoverage:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=new Map,i=new Proxy(Object.freeze({}),{get:(e,t)=>u(t)});function c(t,r){if(r&&(e=r),o.clear(),Array.isArray(t))for(var n of t){var a=(0,s.strictCollectMemberUsageInFunction)(n,"FN"),i=(0,s.strictCollectMemberUsageInFunction)(n,"PERMISSIONS").has("check");o.set(n.name,{source:n.source,typescript:n.typescript,deps:a,hasPermissionsCheck:i})}}function u(a){var s=o.get(a);if(s){if(s.processed)return s.cooked;var c;n&&(c=n.createCollector(a));var u=(0,l.precookFunction)(s.source,{typescript:s.typescript,hooks:c&&{beforeVisit:c.beforeVisit}});return s.cooked=(0,l.cook)(u.function,s.source,{rules:{noVar:!0},globalVariables:(0,f.supply)(u.attemptToVisitGlobals,q(u.attemptToVisitGlobals,{collectCoverage:n,widgetId:t,widgetVersion:r,app:e,storyboardFunctions:i,isStoryboardFunction:!0}),!!n),hooks:c&&{beforeEvaluate:c.beforeEvaluate,beforeCall:c.beforeCall,beforeBranch:c.beforeBranch}}),s.processed=!0,s.cooked}}return{storyboardFunctions:i,registerStoryboardFunctions:c,updateStoryboardFunction(e,t){var r=(0,a.Z)((0,a.Z)({},t),{},{name:e}),n=(0,s.strictCollectMemberUsageInFunction)(r,"FN"),i=(0,s.strictCollectMemberUsageInFunction)(r,"PERMISSIONS").has("check");o.set(e,{source:t.source,typescript:t.typescript,deps:n,hasPermissionsCheck:i})},checkPermissionsUsage(e){var t=new Set,r=e=>{if(!t.has(e)){t.add(e);var n=o.get(e);return!!n&&(n.hasPermissionsCheck||[...n.deps].some(r))}return!1};return e.some(r)}}}var{storyboardFunctions:G,registerStoryboardFunctions:J,checkPermissionsUsage:Y}=z(),Q=r(761),X=function(e){return e.xLarge="xLarge",e.large="large",e.medium="medium",e.small="small",e.xSmall="xSmall",e}({}),ee=new Map([[X.xLarge,"1920px"],[X.large,"1600px"],[X.medium,"1280px"],[X.small,"1024px"],[X.xSmall,0]]),te=new Q.Z,re={},ne={};function ae(e,t){var r=!1;for(var[n]of(re[t]=e.matches,ee))if(re[n]&&ne.breakpoint!==n){ne.breakpoint=n,r=!0;break}r&&te.dispatchEvent(new CustomEvent("change",{detail:ne}))}ee.forEach(((e,t)=>{var r=window.matchMedia("(min-width: ".concat(e,")"));ae(r,t),r.addEventListener?r.addEventListener("change",(e=>{ae(e,t)})):r.addListener((e=>{ae(e,t)}))}));var oe=()=>ne;function ie(e){return function(t){var r,n="local"===e?localStorage:sessionStorage;return JSON.parse(null!==(r=n.getItem(t))&&void 0!==r?r:"null")}}var se=r(381),ce=r(8874),le=(r(8525),r(7857)),ue=r(2159);function pe(e,t){var r=(0,i.orderBy)(e,(e=>{var t,r,n;return null!==(t=null===(r=e.app)||void 0===r||null===(n=r.homepage)||void 0===n?void 0:n.length)&&void 0!==t?t:0}),"desc");for(var n of r){var a=n.app.homepage;if("string"==typeof a&&"/"===a[0]&&("/"===a?t===a:"".concat(t.replace(/\/+$/,""),"/").startsWith("".concat(a.replace(/\/+$/,""),"/"))))return n}}function de(e){var t;return!e||(null===(t=ka().getCurrentApp())||void 0===t?void 0:t.id)!==e.app.id&&!window.STANDALONE_MICRO_APPS&&e.app.standaloneMode}var fe,ve=["extraQuery","clear","keepHash"],he=!1;function me(e,t){t(!(he=!confirm(e)))}function ge(){if(!fe){var e=(0,le.createBrowserHistory)({basename:$().replace(/\/$/,""),getUserConfirmation:me});Object.assign(e,function(e){var t,{push:r,replace:n}=e;function o(e,t,n){he=!1,r(e,t),null==n||n(he)}function i(e,t,r){he=!1,n(e,t),null==r||r(he)}function s(t){return function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,{extraQuery:s,clear:c,keepHash:l}=n,u=(0,ue.Z)(n,ve),p=new URLSearchParams(c?"":e.location.search),d={};for(var[f,v]of(Object.assign(d,r,s),Object.entries(d)))if(Array.isArray(v))for(var h of(p.delete(f),v))p.append(f,h);else null==v||""===v?p.delete(f):p.set(f,v);("push"===t?o:i)("?".concat(p.toString()).concat(l?e.location.hash:""),u,a)}}return(0,a.Z)({pushQuery:s("push"),replaceQuery:s("replace"),pushAnchor:function(t,r,n){o((0,a.Z)((0,a.Z)({},e.location),{},{key:void 0,hash:t,state:(0,a.Z)({notify:!1},r)}),void 0,n)},reload:function(t){i((0,a.Z)((0,a.Z)({},e.location),{},{state:(0,a.Z)((0,a.Z)({},e.location.state),{},{notify:!0})}),void 0,t)},setBlockMessage:function(e){t=e},getBlockMessage:function(){return t},unblock:function(){t=void 0}},function(e){var{push:t,replace:r}=e;function n(n){return function(a,o,i){var s,c="string"==typeof a;return"string"==typeof(s=c?(0,le.parsePath)(a).pathname:a.pathname)&&s.startsWith("/")&&de(function(e){var t,r;return pe(null!==(t=null===(r=ya)||void 0===r?void 0:r.storyboards)&&void 0!==t?t:[],e)}(s))?location["push"===n?"assign":"replace"](c?$()+a.substring(1):e.createHref(a)):("push"===n?t:r)(a,o,i)}}return{push:n("push"),replace:n("replace")}}((0,a.Z)((0,a.Z)({},e),{},{push:o,replace:i})))}(e)),fe=e}return fe}function ye(){return fe}var be=r(5866),we=r(6171),Ee=r(2534),Se=r(9169),ke=r(7301),Pe=new Map,Ae=new Map,Ie=(e,t)=>{null==e||e.forEach((e=>{t.set("".concat(e.namespaceId,".").concat(e.name),e)}))};function xe(e){Ie(e,Pe)}function Ze(){Ae.clear()}function Oe(e){return Pe.get(e)||Ae.get(e)}var Te=new Map;function Ce(e){return e.includes("@")}function Re(e,t,r){return Be.apply(this,arguments)}function Be(){return(Be=(0,o.Z)((function*(e,t,r){if(!Ce(e))return t;if(!e.includes(":"))throw new Error("You're using legacy Custom API \"".concat(e,'" which is dropped in v3, please use Flow API instead'));var n=yield Me(e);if(!n)throw new Error('Flow API not found: "'.concat(e,'"'));return _e(Le(e,n),t,r)}))).apply(this,arguments)}function _e(e,t,r){var n,{uri:a,method:o,ext_fields:i,name:s,namespace:c,serviceName:l,responseWrapper:u,version:p,isFileType:d,request:f}=e,v=d&&"saveAs"===r;v&&(n=t.shift());var{url:h,args:m}=function(e,t,r,n,a,o){var i=o?a?"api/gateway/".concat(a):"api/gateway/".concat(n,".").concat(r,"@").concat(o):"api/gateway/api_service.".concat(n,".").concat(r),s=t.slice();return{url:i+e.replace(/:([^/]+)/g,(()=>s.shift())),args:s}}(a,t,s,c,l,p);return[...v?[n]:[],{url:h,originalUri:a,method:o,ext_fields:i,responseWrapper:u,request:f,isFileType:d},...m]}function Le(e,t){var r,n,a="string"==typeof t.contract?Se.safeLoad(t.contract,{schema:Se.JSON_SCHEMA,json:!0}):t.contract,{uri:o,method:i="GET",ext_fields:s}=null!==(r=null==a?void 0:a.endpoint)&&void 0!==r?r:{},c=!(null==a||!a.response)&&!1!==a.response.wrapper;if(!o)throw new Error('Missing endpoint.uri in contract of provider "'.concat(e,'"'));return{uri:o,method:"list"===i.toLowerCase()?"get":i,ext_fields:s,name:t.name,namespace:t.namespace,serviceName:t.serviceName,version:t.version,isFileType:"file"===(null==a||null===(n=a.response)||void 0===n?void 0:n.type),responseWrapper:c,request:null==a?void 0:a.request}}function Me(e){var t=Te.get(e);return t||(t=function(e){return Fe.apply(this,arguments)}(e),Te.set(e,t)),t}function Fe(){return(Fe=(0,o.Z)((function*(e){var[t,r]=e.split("@"),[n,a]=r.split(":"),o=Oe("".concat(t,".").concat(n));if(o)return{name:o.name,namespace:o.namespaceId,serviceName:o.serviceName,version:o.version,contract:{endpoint:o.endpoint,response:o.response,request:o.request}};var i,s,{contractData:c}=yield(0,ke.e)({contractName:"".concat(t,".").concat(n),version:a});return c?{name:c.name,namespace:null===(i=c.namespace)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.name,serviceName:c.serviceName,version:c.version,contract:{endpoint:c.endpoint,response:c.response,request:c.request}}:void 0}))).apply(this,arguments)}var Ne="core.provider-flow-api";function Ue(e,t){return e.some((e=>e.source===t))}function je(e){for(var t=Ue(e,"query"),r=Ue(e,"body"),n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];if(t){if(r){var[s,c,l]=o;return{data:s,options:(0,a.Z)({params:c},l)}}var[u,p]=o;return{data:{},options:(0,a.Z)({params:u},p)}}var[d,f]=o;return{data:d,options:f}}function Ve(e){if(!e||"object"!==e.type)return!1;var t=e=>!(0,i.isEmpty)(e)&&e.some((e=>["file","file[]"].includes(e.type)||t(e.fields)));return t(e.fields)}function De(e){if(e instanceof FormData)return e;var t=new FormData,r=function(e){Array.isArray(a)?a.forEach((r=>{t.append(e,r)})):!(0,i.isObject)(a)||a instanceof Blob||a instanceof Date?t.append(e,a):Object.entries(a).forEach((r=>{var[n,a]=r;t.append("".concat(e,"[").concat(n,"]"),a)}))};for(var[n,a]of Object.entries(e))r(n);return t}function $e(e){return qe.apply(this,arguments)}function qe(){return qe=(0,o.Z)((function*(e){for(var t,{url:r,originalUri:n,method:o="GET",responseWrapper:i=!0,ext_fields:s=[],request:c,isFileType:l}=e,u=["get","delete","head"].includes(o.toLowerCase()),p=l?{responseType:"blob"}:{},d=arguments.length,f=new Array(d>1?d-1:0),v=1;v<d;v++)f[v-1]=arguments[v];if(u){var h,m,g,y,b,w,E=!(!n||"object"!==(null==c?void 0:c.type))&&(null!==(h=null===(m=n.match(/:([^/]+)/g))||void 0===m?void 0:m.length)&&void 0!==h?h:0)===(null!==(g=null===(y=c.fields)||void 0===y?void 0:y.length)&&void 0!==g?g:0);E?[w]=f:[b,w]=f,t=yield Ee.http.simpleRequest(o,r,(0,a.Z)((0,a.Z)({params:b},p),w))}else{var S=Ve(c),k=je(s,...f);t=yield Ee.http.requestWithBody(o,r,S?De(k.data):k.data,(0,a.Z)((0,a.Z)({},p),k.options))}return!l&&i?t.data:t})),qe.apply(this,arguments)}function We(){customElements.define(Ne,(0,u.createProviderClass)($e))}var He=new Map;function Ke(e){return ze.apply(this,arguments)}function ze(){return ze=(0,o.Z)((function*(e){Ce(e)&&(e=Ne);var t=He.get(e);if(t)return t;if(e.includes("-")&&!customElements.get(e))if(e===Ne)We();else if(yield(0,d.loadBricksImperatively)([e],xa()),!customElements.get(e))throw new Error('Provider not defined: "'.concat(e,'".'));return t=document.createElement(e),He.set(e,t),t})),ze.apply(this,arguments)}var Ge=new Map;function Je(e,t,r){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,o.Z)((function*(e,t,r){var{useProvider:n,method:o="resolve",args:i=[],onReject:s}=e,c=e.provider;if(c&&!n)throw new Error("You're using \"provider: ".concat(c,'" which is dropped in v3, please use "useProvider" instead'));var l,[u,p]=yield Promise.all([Ke(n),go(i,t)]),d=Xe(u,n,o,p,r,i),{transform:f}=e;try{l=yield d}catch(e){if(!tt(s))throw e;f=s.transform,l=e}return f?"string"==typeof f?{[f]:l}:go(f,(0,a.Z)((0,a.Z)({},t),{},{data:l})):l}))).apply(this,arguments)}function Qe(){Ge.clear()}function Xe(e,t,r,n,a,o){return et.apply(this,arguments)}function et(){return et=(0,o.Z)((function*(e,t,r,n,a,i){var s,c;try{s=JSON.stringify({useProvider:t,method:r,args:n})}catch(e){if(!i)throw e;s=JSON.stringify({useProvider:t,method:r,originalArgs:i})}return"reload"!==(null==a?void 0:a.cache)&&(c=Ge.get(s)),c||(c=(0,o.Z)((function*(){var a=yield Re(t,n,r);return e.resolve(...a)}))(),Ge.set(s,c)),c})),et.apply(this,arguments)}function tt(e){return!(null==e||!e.transform)}function rt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=(0,o.Z)((function*(e,t){return!(0,u.hasOwnProperty)(e,"if")||!!("string"==typeof e.if||co(e.if)?yield go(e.if,t):e.if)}))).apply(this,arguments)}function at(e,t){return!(0,u.hasOwnProperty)(e,"if")||!!("string"==typeof e.if||co(e.if)?bo(e.if,t):e.if)}function ot(e){return!(0,u.hasOwnProperty)(e,"if")||!!e.if}function it(e,t){return st.apply(this,arguments)}function st(){return(st=(0,o.Z)((function*(e,t){return(0,u.isObject)(e.if)&&!co(e.if)?ot(yield Je(e.if,t)):rt(e,t)}))).apply(this,arguments)}function ct(e,t){return at(e,{data:t})}var lt=function(e){return e[e.INITIAL=0]="INITIAL",e[e.USE_BRICK=1]="USE_BRICK",e[e.USE_BRICK_ITEM=2]="USE_BRICK_ITEM",e[e.USE_BRICK_PROPERTIES=3]="USE_BRICK_PROPERTIES",e[e.USE_BRICK_TRANSFORM=4]="USE_BRICK_TRANSFORM",e[e.USE_BRICK_EVENTS=5]="USE_BRICK_EVENTS",e[e.USE_BRICK_IF=6]="USE_BRICK_IF",e[e.USE_BRICK_SLOTS=7]="USE_BRICK_SLOTS",e[e.USE_BRICK_SLOTS_ITEM=8]="USE_BRICK_SLOTS_ITEM",e[e.USE_BRICK_SLOTS_ITEM_BRICKS=9]="USE_BRICK_SLOTS_ITEM_BRICKS",e[e.USE_BRICK_SLOTS_ITEM_BRICKS_ITEM=10]="USE_BRICK_SLOTS_ITEM_BRICKS_ITEM",e[e.USE_BRICK_LIFECYCLE=11]="USE_BRICK_LIFECYCLE",e[e.USE_BRICK_DATA_SOURCE=12]="USE_BRICK_DATA_SOURCE",e}({});function ut(e){switch(e){case lt.USE_BRICK_PROPERTIES:case lt.USE_BRICK_TRANSFORM:case lt.USE_BRICK_EVENTS:case lt.USE_BRICK_IF:case lt.USE_BRICK_LIFECYCLE:case lt.USE_BRICK_DATA_SOURCE:return!0}return!1}function pt(e,t,r){if(ut(e))return e;if(t)switch(e){case lt.USE_BRICK:return lt.USE_BRICK_ITEM;case lt.USE_BRICK_SLOTS_ITEM_BRICKS:return lt.USE_BRICK_SLOTS_ITEM_BRICKS_ITEM}else switch(e){case lt.INITIAL:if("useBrick"===r)return lt.USE_BRICK;break;case lt.USE_BRICK:case lt.USE_BRICK_ITEM:case lt.USE_BRICK_SLOTS_ITEM_BRICKS_ITEM:switch(r){case"properties":return lt.USE_BRICK_PROPERTIES;case"transform":return lt.USE_BRICK_TRANSFORM;case"dataSource":return lt.USE_BRICK_DATA_SOURCE;case"events":return lt.USE_BRICK_EVENTS;case"slots":return lt.USE_BRICK_SLOTS;case"children":return lt.USE_BRICK_SLOTS_ITEM_BRICKS;case"if":return lt.USE_BRICK_IF;case"lifeCycle":return lt.USE_BRICK_LIFECYCLE}break;case lt.USE_BRICK_SLOTS:return lt.USE_BRICK_SLOTS_ITEM;case lt.USE_BRICK_SLOTS_ITEM:if("bricks"===r)return lt.USE_BRICK_SLOTS_ITEM_BRICKS}return lt.INITIAL}function dt(e){var t=!1,r=!1,n=!1;if("string"==typeof e?(0,l.isEvaluable)(e):co(e)){var a="string"==typeof e?e:e[io];if((0,l.isTrackAll)(a)){var o=(0,s.trackAll)(a);o&&(t=o.context,r=o.state,n=o.formState)}else t=(0,s.track)(a,"track context","CTX"),r=(0,s.track)(a,"track state","STATE"),n=(0,s.track)(a,"track formstate","FORM_STATE")}return{contextNames:t,stateNames:r,formStateNames:n}}function ft(e,t,r){return vt.apply(this,arguments)}function vt(){return vt=(0,o.Z)((function*(e,t,r){return(0,u.isObject)(e)?Object.fromEntries((yield Promise.all(Object.entries(e).map(function(){var e=(0,o.Z)((function*(e){var[n,a]=e;if(Array.isArray(r)){var{contextNames:o,stateNames:i,formStateNames:s}=dt(a);(o||i||s)&&r.push({contextNames:o,stateNames:i,formStateNames:s,propName:n,propValue:a})}var c=yield go(a,t,{$$lazyForUseBrick:!0,$$stateOfUseBrick:"useBrick"===n?lt.USE_BRICK:lt.INITIAL});if("style"!==n&&"dataset"!==n||(0,u.isObject)(c))return[n,c]}));return function(t){return e.apply(this,arguments)}}()))).filter(Boolean)):{}})),vt.apply(this,arguments)}function ht(e,t){if(t)for(var[r,n]of Object.entries(t))switch(r){case"style":case"dataset":for(var[a,o]of Object.entries(n))e[r][a]=o;break;case"constructor":case"__proto__":case"innerHTML":throw new Error("set `".concat(r,"` is prohibited"));default:e[r]=n}}function mt(e,t,r){var n=function(e,t,r){return(0,u.isObject)(e)?Object.fromEntries(Object.entries(e).map((e=>{var[n,a]=e;if(Array.isArray(r)){var{contextNames:o,stateNames:i,formStateNames:s}=dt(a);(o||i||s)&&r.push({contextNames:o,stateNames:i,formStateNames:s,propName:n,propValue:a})}var c=bo(a,t,{$$lazyForUseBrick:!0,$$stateOfUseBrick:"useBrick"===n?lt.USE_BRICK:lt.INITIAL});if("style"!==n&&"dataset"!==n||(0,u.isObject)(c))return[n,c]})).filter(Boolean)):{}}(t,r);Array.isArray(e)||(e=[e]),e.forEach((e=>{ht(e,n)}))}function gt(e){var t,r;return!(null===(t=e?e.flags:null===(r=ka())||void 0===r?void 0:r.getFeatureFlags())||void 0===t||!t["brick-next-v3-strict-mode"])}function yt(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var o=0===n.length?"":",";e?console.error("".concat(t," is dropped in v3 strict mode").concat(o),...n):console.warn("".concat(t," is deprecated in v3 and will be dropped in strict mode").concat(o),...n)}var bt=new Set(["prefix"]),wt=new WeakMap,Et=new class{constructor(){(0,v.Z)(this,wt,{writable:!0,value:new Map})}define(e,t){var r,n,o,s,c=(0,h.Z)(this,wt).has(e);c?console.warn('Custom template of "'.concat(e,'" already registered.')):(c=!!customElements.get(e))&&console.warn('Custom template of "'.concat(e,'" already defined by customElements.'));var l=gt(),u=null!==(r=null===(n=t.proxy)||void 0===n?void 0:n.properties)&&void 0!==r?r:{},p=[],d=[];for(var[f,v]of Object.entries(u))v.asVariable?(yt(l,"Template `asVariable`",e,f),l||d.push(f)):v.mergeProperty||v.refTransform?console.error("Template `mergeProperty` and `refTransform` are dropped in v3:",e,f):v.ref&&p.push([f,v]);var m=(0,a.Z)((0,a.Z)({},t),{},{proxy:(0,a.Z)((0,a.Z)({},t.proxy),{},{properties:Object.fromEntries(p)}),state:(t.state?l?t.state:t.state.map((e=>(0,a.Z)({expose:!0},e))):[]).concat(d.map((e=>({name:e,expose:!0}))))});(0,h.Z)(this,wt).set(e,(0,a.Z)((0,a.Z)({},m),{},{name:e}));var g,y,b=(g=m.state,(0,i.uniq)(null!==(y=null==g?void 0:g.filter((e=>e.expose)).map((e=>e.name)))&&void 0!==y?y:[])),w=Object.entries(null!==(o=null===(s=m.proxy)||void 0===s?void 0:s.methods)&&void 0!==o?o:{}),E=b.concat(p.map((e=>e[0]))),S=w.map((e=>e[0])),k=E.concat(S).filter((e=>e in HTMLElement.prototype&&!bt.has(e)));if(k.length>0&&(yt(l,"Using native HTMLElement properties as template properties or methods",e,...k),l))throw new Error('In custom template "'.concat(e,'", ').concat(k.map((e=>'"'.concat(e,'"'))).join(", ")," are native HTMLElement properties, and should be avoid to be used as brick properties or methods."));if(!c){class t extends HTMLElement{get $$typeof(){return"custom-template"}static get _dev_only_definedProperties(){return E}static get _dev_only_definedMethods(){return S}$$getElementByRef(e){var t,r,n,a;return null===(t=this.$$tplStateStore)||void 0===t||null===(r=t.hostBrick)||void 0===r||null===(n=r.tplHostMetadata)||void 0===n||null===(a=n.internalBricksByRef.get(e))||void 0===a?void 0:a.element}connectedCallback(){var e=this.shadowRoot;e||(e=this.attachShadow({mode:"open"}));var t=document.createDocumentFragment(),r=document.createElement("style");r.textContent=":host{display:block}:host([hidden]){display:none}";var n=document.createElement("slot");t.appendChild(r),t.appendChild(n),e.appendChild(t)}disconnectedCallback(){this.shadowRoot&&(this.shadowRoot.textContent="")}}var P=function(r){if(p.some((e=>e[0]===r)))return console.error('Cannot define an exposed state that is also a proxy property: "'.concat(r,'" in ').concat(e)),"continue";Object.defineProperty(t.prototype,r,{get(){return this.$$tplStateStore.getValue(r)},set(e){var t;null===(t=this.$$tplStateStore)||void 0===t||t.updateValue(r,e,"replace")},enumerable:!0})};for(var A of b)P(A);var I=function(e,r){Object.defineProperty(t.prototype,e,{get(){var t;return this.$$getElementByRef(r.ref)[null!==(t=r.refProperty)&&void 0!==t?t:e]},set(t){var n,a,o=null===(n=this.$$getElementByRef)||void 0===n?void 0:n.call(this,r.ref);o&&(o[null!==(a=r.refProperty)&&void 0!==a?a:e]=t)},enumerable:!0})};for(var[x,Z]of p)I(x,Z);var O=function(e,r){Object.defineProperty(t.prototype,e,{value(){var t;this.$$getElementByRef(r.ref)[null!==(t=r.refMethod)&&void 0!==t?t:e](...arguments)},enumerable:!0})};for(var[T,C]of w)O(T,C);customElements.define(e,t)}}get(e){return(0,h.Z)(this,wt).get(e)}};function St(e,t,r){var{tplStateStoreId:n,tplStateStoreMap:a}=e;if(!n)throw new Error('Using "'.concat(t,'" outside of a custom template').concat(null!=r?r:""));var o=a.get(n);if(!o)throw new Error('Template state store is not found when using "'.concat(t,'"').concat(null!=r?r:"",".\nThis is a bug of Brick Next, please report it."));return o}function kt(e,t,r){var n=St(e,t,r).hostBrick.element;if(!n)throw new Error('Template host element is gone when using "'.concat(t,'"').concat(null!=r?r:"",".\nThis is a bug of Brick Next, please report it."));return n}function Pt(e,t){if(!e.includes(".")&&e.startsWith("tpl-")&&t){var r="".concat(t,".").concat(e);if(Et.get(r))return r}return!!Et.get(e)&&e}function At(e,t,r){var{formStateStoreId:n,formStateStoreMap:a}=e;if(!n)throw new Error('Using "'.concat(t,'" outside of form renderer').concat(null!=r?r:""));var o=a.get(n);if(!o)throw new Error('Form state store is not found when using "'.concat(t,'"').concat(null!=r?r:"",".\nThis is a bug of Brick Next, please report it."));return o}function It(e,t){var r=function(t){var r=()=>{e.element&&mt(e.element,{[t.propName]:t.propValue},e.runtimeContext)};if(t.contextNames)for(var n of t.contextNames)e.runtimeContext.ctxStore.onChange(n,r);if(t.stateNames){var a=St(e.runtimeContext,"STATE",': "'.concat(t.propValue,'"'));for(var o of t.stateNames)a.onChange(o,r)}if(t.formStateNames){var i=At(e.runtimeContext,"FORM_STATE",': "'.concat(t.propValue,'"'));for(var s of t.formStateNames)i.onChange(s,r)}};for(var n of t)r(n)}var xt=r(6903),Zt=new Map,Ot=0;function Tt(e,t){var{path:r,exact:n=!1,strict:a=!1,sensitive:o=!0}=t;return(Array.isArray(r)?r:[r]).reduce(((t,r)=>{if(t)return t;var{regexp:i,keys:s}=function(e,t){var r="".concat(t.end).concat(t.strict).concat(t.sensitive),n=Zt.get(r);n||Zt.set(r,n=new Map);var a=n.get(e);if(a)return a;var o=[],i={regexp:(0,xt.Bo)(e,o,t),keys:o};return Ot<1e4&&(n.set(e,i),Ot++),i}(r,{end:n,strict:a,sensitive:o}),c=i.exec(e);if(!c)return null;var[l,...u]=c,p=e===l;return n&&!p?null:{path:r,url:"/"===r&&""===l?"/":l,isExact:p,params:s.reduce(((e,t,r)=>(e[t.name]=u[r],e)),{})}}),null)}function Ct(e,t){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,o.Z)((function*(e,t){for(var r of e){if("string"!=typeof r.path)throw console.error("Invalid route with invalid path:",r),new Error("Invalid route with invalid type of path: ".concat(typeof r.path));var n=r.path.replace(/^\$\{APP.homepage\}/,t.app.homepage),a=Tt(t.location.pathname,{path:n,exact:r.exact});if(a&&(yield rt(r,t)))return t.app.noAuthGuard||r.public||Lo()?{match:a,route:r}:"unauthenticated"}return"missed"}))).apply(this,arguments)}var Bt=Symbol.for("tpl.asyncComputedPropsFromHost"),_t=Symbol.for("tpl.stateStoreId"),Lt=Symbol.for("tpl.externalForEachItem"),Mt=r(6666),Ft=new Set;function Nt(e,t,r){var n,{progress:a,success:i,error:s,finally:c}=t,{interval:l,leadingRequestDelay:u,continueOnError:p,delegateLoadingBar:d,expectPollEnd:f,expectPollStopImmediately:v}=r,h=Za();function m(){return g.apply(this,arguments)}function g(){return(g=(0,o.Z)((function*(){var t;Ft.delete(n);try{if(!(t=null==v?void 0:v())){var r=yield e();(t=(null==v?void 0:v())||h!==Za())||(null==a||a(r),null!=f&&f(r)?(d&&window.dispatchEvent(new Event("request.end")),null==i||i(r),null==c||c()):y(null!=l?l:3e3))}}catch(e){(t=(null==v?void 0:v())||h!==Za())||(null==s||s(e),p?y(null!=l?l:3e3):null==c||c())}finally{d&&t&&window.dispatchEvent(new Event("request.end"))}}))).apply(this,arguments)}function y(e){n=setTimeout(m,e),Ft.add(n)}y(null!=u?u:0),d&&window.dispatchEvent(new Event("request.start"))}var Ut,jt=function(e){return e.REQUEST_FAILED="REQUEST_FAILED",e.SOMETHING_WENT_WRONG="SOMETHING_WENT_WRONG",e.LOGIN_TIMEOUT_MESSAGE="LOGIN_TIMEOUT_MESSAGE",e.NETWORK_ERROR="NETWORK_ERROR",e}({}),Vt={[jt.REQUEST_FAILED]:"Request Failed",[jt.SOMETHING_WENT_WRONG]:"Something went wrong!",[jt.LOGIN_TIMEOUT_MESSAGE]:"You haven't logged in or your login session has expired. Login right now?",[jt.NETWORK_ERROR]:"Network error, please check your network."},Dt={[jt.REQUEST_FAILED]:"",[jt.SOMETHING_WENT_WRONG]:"",[jt.LOGIN_TIMEOUT_MESSAGE]:"",[jt.NETWORK_ERROR]:""},$t="core/runtime",qt={en:Vt,zh:Dt},Wt=Object.freeze({show:function(e){return Ut?Ut.resolve(e):"confirm"===e.type?confirm(e.content)?new Promise((e=>setTimeout((()=>{e()}),1))):new Promise(((e,t)=>setTimeout((()=>{t()}),1))):(alert(e.content),new Promise((e=>setTimeout((()=>{e()}),1e3))))}});function Ht(e){if(e instanceof Event&&e.target instanceof HTMLScriptElement)return e.target.src;if(e instanceof Ee.HttpFetchError)return y.i18n.t("".concat($t,":").concat(jt.NETWORK_ERROR));if(e instanceof Ee.HttpResponseError&&e.responseJson){if("string"==typeof e.responseJson.error)return e.responseJson.error;if("string"==typeof e.responseJson.msg)return e.responseJson.msg}return null==e?"Unknown error":e.toString()}function Kt(e){return e instanceof Ee.HttpResponseError&&401===e.response.status&&!!e.responseJson&&100003===e.responseJson.code}var zt,Gt,Jt=!1;function Yt(e){if(!(e instanceof Ee.HttpAbortError)){if(Kt(e)&&!window.NO_AUTH_GUARD){if(Jt)return;return Jt=!0,void Wt.show({type:"confirm",content:y.i18n.t("".concat($t,":").concat(jt.LOGIN_TIMEOUT_MESSAGE))}).then((()=>{var e,t;e=ka().getFeatureFlags()["sso-enabled"],(t=ye()).push(e?"/sso-auth/login":"/auth/login",{from:(0,a.Z)((0,a.Z)({},t.location),{},{state:void 0})}),Jt=!1}),(()=>{Jt=!1}))}console.error(e);var t=Ht(e);t!==zt&&(zt=t,Wt.show({type:"error",title:y.i18n.t("".concat($t,":").concat(jt.REQUEST_FAILED)),content:t,contentStyle:{whiteSpace:"pre-wrap"}}).then((()=>{zt=void 0})))}}var Qt=Object.freeze({show:function(e){Gt?Gt.resolve(e):alert(e.message)}});function Xt(e,t,r){t&&Object.entries(t).forEach((t=>{var[n,a]=t,o=nr(a,r,{element:e});for(var i of(e.addEventListener(n,o),e.$$listeners||(e.$$listeners=[]),e.$$listeners.push([n,o]),e.$$eventListeners||(e.$$eventListeners=[]),[].concat(a)))e.$$eventListeners.push([n,null,i])}))}function er(e){return"string"==typeof e.action}function tr(e){return"string"==typeof e.useProvider}function rr(e){return!(!e.target&&!e.targetRef||!e.method&&!e.properties)}function nr(e,t,r){return function(n){for(var o of[].concat(e))if(at(o,(0,a.Z)((0,a.Z)({},t),{},{event:n})))if(er(o)){var[i,s]=o.action.split(".");switch(o.action){case"history.push":case"history.replace":case"history.pushQuery":case"history.replaceQuery":case"history.pushAnchor":case"history.block":case"history.goBack":case"history.goForward":case"history.reload":case"history.unblock":lr(n,s,o.args,o.callback,t);break;case"window.open":ur(n,o.args,t);break;case"location.reload":case"location.assign":vr(n,s,o.args,t);break;case"localStorage.setItem":case"localStorage.removeItem":case"sessionStorage.setItem":case"sessionStorage.removeItem":hr(n,i,s,o.args,t);break;case"event.preventDefault":n.preventDefault();break;case"console.log":case"console.error":case"console.warn":case"console.info":mr(n,s,o.args,t);break;case"message.success":case"message.error":case"message.info":case"message.warn":gr(n,s,o.args,t);break;case"handleHttpError":Yt(n.detail);break;case"context.assign":case"context.replace":case"context.refresh":case"context.load":pr(n,s,o.args,o.callback,t);break;case"state.update":case"state.refresh":case"state.load":dr(n,s,o.args,o.callback,t);break;case"tpl.dispatchEvent":var[c,l]=br(o.args,t,n);kt(t,o.action,": ".concat(c)).dispatchEvent(new CustomEvent(c,l));break;case"formstate.update":fr(n,o.args,o.callback,t);break;case"theme.setDarkTheme":case"theme.setLightTheme":L("theme.setDarkTheme"===o.action?"dark":"light");break;case"theme.setTheme":var[u]=br(o.args,t,n);L(u);break;case"mode.setDashboardMode":case"mode.setDefaultMode":V("mode.setDashboardMode"===o.action?"dashboard":"default");break;default:console.error("unknown event listener action:",o.action)}}else tr(o)?ar(n,o,t,r):rr(o)?ir(n,o,t,r):console.error("unknown event handler:",o)}}function ar(e,t,r,n){return or.apply(this,arguments)}function or(){return(or=(0,o.Z)((function*(e,t,r,n){try{sr(e,yield Ke(t.useProvider),t,"saveAs"!==t.method?"resolve":"saveAs",r,n)}catch(e){console.error(Ht(e))}}))).apply(this,arguments)}function ir(e,t,r,n){var o=[],i=t.target,s=t.targetRef,c=i;if(("string"==typeof i?(0,l.isEvaluable)(i):co(i))&&(c=bo(i,(0,a.Z)((0,a.Z)({},r),{},{event:e}))),"string"==typeof c)if("_self"===c)o.push(n.element);else if(t.multiple)o=Array.from(document.querySelectorAll(c));else{var u=document.querySelector(c);null!==u&&o.push(u)}else if(c)c instanceof HTMLElement?o.push(c):console.error("unexpected target:",c);else if(s){var p=s;("string"==typeof s?(0,l.isEvaluable)(s):co(s))&&(p=bo(s,(0,a.Z)((0,a.Z)({},r),{},{event:e})));var d=[].concat(p),f=kt(r,"targetRef",": ".concat(d.join(", ")));o.push(...d.map((e=>{var t;return null===(t=f.$$getElementByRef)||void 0===t?void 0:t.call(f,e)})).filter(Boolean))}0!==o.length?function(e){return!!e.method}(t)?o.forEach((a=>{sr(e,a,t,t.method,r,n,{useEventAsDefault:!0})})):function(e){return!!e.properties}(t)&&mt(o,t.properties,(0,a.Z)((0,a.Z)({},r),{},{event:e})):console.error("target not found:",i||s)}function sr(e,t,r,n,a,o,i){return cr.apply(this,arguments)}function cr(){return cr=(0,o.Z)((function*(e,t,r,n,i,s,c){var l;if("function"==typeof t[n]){var u=function(){var a=(0,o.Z)((function*(){var a=br(r.args,i,e,c);return tr(r)&&(a=yield Re(r.useProvider,a,n)),t[n](...a)}));return function(){return a.apply(this,arguments)}}();if(r.callback){var p,d=yr(r.callback,i,s),f={progress:d("progress"),success:d("success"),error:d("error"),finally:d("finally")};if(tr(r)&&(p=bo(r.poll,(0,a.Z)((0,a.Z)({},i),{},{event:e}))),null!==(l=p)&&void 0!==l&&l.enabled)Nt(u,f,p);else try{var v=yield u();f.success(v)}catch(e){f.error(e)}finally{f.finally()}}else u()}else console.error("target has no method:",{target:t,method:n})})),cr.apply(this,arguments)}function lr(e,t,r,n,a){var o=0,i=!1,s=t;switch(t){case"push":case"replace":case"pushQuery":case"replaceQuery":case"pushAnchor":o=2,i=!0;break;case"reload":i=!0;break;case"block":o=1,s="setBlockMessage"}var c=[];if(o>0&&((c=br(r,a,e,{useEventDetailAsDefault:!0})).length=o),i&&n){var l=yr(n,a,void 0);c.push((e=>{l(e?"error":"success")({blocked:e}),l("finally")({blocked:e})}))}ye()[s](...c)}function ur(e,t,r){var[n,a,o]=br(t,r,e);window.open(n,a||"_self",o)}function pr(e,t,r,n,a){var[o,i]=br(r,a,e);a.ctxStore.updateValue(o,i,t,n,a)}function dr(e,t,r,n,a){var[o,i]=br(r,a,e);St(a,"state.".concat(t),": ".concat(o)).updateValue(o,i,"update"===t?"replace":t,n,a)}function fr(e,t,r,n){var[a,o]=br(t,n,e);At(n,"formstate.update",": ".concat(a)).updateValue(a,o,"replace",r,n)}function vr(e,t,r,n){if("assign"===t){var[a]=br(r,n,e);location.assign(a)}else location[t]()}function hr(e,t,r,n,a){var o="localStorage"===t?localStorage:sessionStorage,[i,s]=br(n,a,e);"setItem"===r?void 0!==s&&o.setItem(i,JSON.stringify(s)):o.removeItem(i)}function mr(e,t,r,n){console[t](...br(r,n,e,{useEventAsDefault:!0}))}function gr(e,t,r,n){var a=br(r,n,e,{useEventAsDefault:!0});Qt.show({type:t,message:a[0]})}function yr(e,t,r){return function(n){return function(a){var o=null==e?void 0:e[n];if(o)try{var i=new CustomEvent("callback.".concat(n),{detail:a});nr(o,t,r)(i)}catch(e){console.error(e)}else"error"===n&&console.error("Unhandled callback error:",a)}}}function br(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Array.isArray(e)?bo(e,(0,a.Z)((0,a.Z)({},t),{},{event:r})):n.useEventAsDefault?[r]:n.useEventDetailAsDefault?[r.detail]:[]}function wr(e,t){return(r,n)=>t?0===n:![...r[1].usedProperties].some((t=>e.has(t)))}function Er(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CTX",r=new Map;for(var n of e){var a=(0,s.collectMemberUsage)([n.if,n.value,n.resolve],t);r.set(n,a)}return r}function Sr(e,t){var r=new Map(e),n=new Set(Array.from(r.keys()).map((e=>e.name))),a=()=>{var e=!1;for(var[t,o]of r.entries())[...o.usedProperties].some((e=>n.has(e)))||(r.delete(t),n.delete(t.name),e=!0);e&&a()};if(a(),r.size>0)throw new ReferenceError("Circular ".concat(t," detected: ").concat(Array.from(r.keys()).map((e=>e.name)).join(", ")))}class kr{constructor(e,t){(0,Mt.Z)(this,"type",void 0),(0,Mt.Z)(this,"data",new Map),(0,Mt.Z)(this,"changeEventType",void 0),(0,Mt.Z)(this,"pendingStack",[]),(0,Mt.Z)(this,"hostBrick",void 0),this.type=e,this.changeEventType="FORM_STATE"===this.type?"formstate.change":"STATE"===this.type?"state.change":"context.change",this.hostBrick=t}getValue(e){var t;return null===(t=this.data.get(e))||void 0===t?void 0:t.value}updateValue(e,t,r,n,o){var i=this.data.get(e);if(!i)throw new Error("".concat(this.type," '").concat(e,"' is not defined"));if("refresh"!==r&&"load"!==r)"replace"===r?i.value=t:(0,u.isObject)(i.value)?Object.assign(i.value,t):(console.warn('Non-object current value of "'.concat(this.type,".").concat(e,'" for "context.assign", try "context.replace" instead.')),i.value=t),i.eventTarget.dispatchEvent(new CustomEvent(this.changeEventType,{detail:i.value}));else{if(!i.load)throw new Error("You can not ".concat(r,' "').concat(this.type,".").concat(e,'" which has no resolve'));var s;if("load"===r&&(i.loaded?s=Promise.resolve(i.value):i.loading&&(s=i.loading)),s||(s=i.loading=i.load((0,a.Z)({cache:"load"===r?"default":"reload"},t))).then((e=>{i.loaded=!0,i.value=e,i.eventTarget.dispatchEvent(new CustomEvent(this.changeEventType,{detail:i.value}))}),(e=>{null!=n&&n.error||Yt(e)})),n){var c=yr(n,o);s.then((e=>{c("success")({value:e}),c("finally")()}),(e=>{c("error")(e),c("finally")()}))}}}define(e,t,r){if(Array.isArray(e)&&e.length>0){var n=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"CTX",n=Er(e,r),a=new Map;for(var i of Array.from(n.keys()).map((e=>e.name))){var s;a.set(i,(null!==(s=a.get(i))&&void 0!==s?s:0)+1)}var c=Array.from(n.values()).some((e=>e.hasNonStaticUsage)),l=new WeakSet,u=new Map,p=new Map([...new Set(e.map((e=>e.name)))].map((e=>[e,new Promise(((t,r)=>{u.set(e,{resolve:t,reject:r})}))]))),d=function(){var e=(0,o.Z)((function*(e){var r;l.add(e);var o=yield t(e);n.delete(e);var i=null!==(r=a.get(e.name))&&void 0!==r?r:0;if(o){if(u.get(e.name).resolve(),a.delete(e.name),0===i)throw new Error("Duplicated context defined: ".concat(e.name))}else 1===i?(u.get(e.name).resolve(),a.delete(e.name)):a.set(e.name,i-1);yield v()}));return function(t){return e.apply(this,arguments)}}(),f=c;function v(){return h.apply(this,arguments)}function h(){return(h=(0,o.Z)((function*(){var e=Array.from(n.entries()).filter(wr(a,f)).map((e=>e[0])).filter((e=>!l.has(e)));yield Promise.all(e.map(d))}))).apply(this,arguments)}return{pendingResult:v().then((0,o.Z)((function*(){for(var e of(n.size>0&&(Sr(n,r),f=!0,yield v()),u.values()))e.resolve()}))).catch((e=>{for(var t of u.values())t.reject(e);throw e})),pendingContexts:p}}(e,(e=>this.resolve(e,t,r)),this.type);this.pendingStack.push(n)}}onChange(e,t){var r;null===(r=this.data.get(e))||void 0===r||r.eventTarget.addEventListener(this.changeEventType,t)}waitFor(e){var t=this;return(0,o.Z)((function*(){var r=function*(t){yield Promise.all([...e].map((e=>t.get(e))))};for(var{pendingContexts:n}of t.pendingStack)yield*r(n)}))()}waitForAll(){var e=this;return(0,o.Z)((function*(){for(var{pendingResult:t}of e.pendingStack)yield t}))()}resolve(e,t,r){var n=this;return(0,o.Z)((function*(){if(!(yield rt(e,t)))return!1;var i,c;if(r&&("STATE"===n.type?e.expose:"FORM_STATE"===n.type)){var l=yield r;(0,u.hasOwnProperty)(l,e.name)&&(i=l[e.name])}var p=!1;if(void 0===i){if(e.resolve){var d=(0,a.Z)({transform:"value"},e.resolve);if(yield rt(e.resolve,t))c=function(){var e=(0,o.Z)((function*(e){return(yield Je(d,t,e)).value}));return function(t){return e.apply(this,arguments)}}(),(p=e.resolve.lazy)||(i=yield c());else if(!(0,u.hasOwnProperty)(e,"value"))return!1}c&&!p||void 0===e.value||(i=yield go(e.value,t))}var f={value:i,eventTarget:new EventTarget,load:c,loaded:!p};if(e.onChange&&f.eventTarget.addEventListener(n.changeEventType,nr(e.onChange,t)),e.track){var v=(0,s.strictCollectMemberUsage)(c?e.resolve:e.value,n.type);for(var h of v)n.onChange(h,(()=>{c?n.updateValue(e.name,{cache:"default"},"refresh"):n.updateValue(e.name,bo(e.value,t),"replace")}))}if(n.data.has(e.name))throw new Error("".concat(n.type," '").concat(e.name,"' has already been declared"));return n.data.set(e.name,f),!0}))()}}function Pr(e,t,r){var n,{reversedProxies:a,asyncHostProperties:o,externalSlots:s,tplStateStoreId:c,hostBrick:l}=e;if(t&&a){var p=a.properties.get(t);p&&(n=o.then((e=>{var t={};for(var{from:r,to:n}of p){var a=e[r];void 0!==a&&n.refProperty&&(t[n.refProperty]=a)}return t})));var d=a.slots.get(t);if(d&&s){var f=new Map;for(var{from:v,to:h}of d){var m,g,y,b,w=null!==(m=null===(g=s[v])||void 0===g?void 0:g.bricks)&&void 0!==m?m:[];if(w.length){var E=null!==(y=h.refSlot)&&void 0!==y?y:v,S=f.get(E);if(!S){S=[];for(var k=(0,u.hasOwnProperty)(r,E)?r[E].bricks.length+1:1,P=0;P<k;P+=1)S.push([]);f.set(E,S)}var A=null!==(b=h.refPosition)&&void 0!==b?b:-1;S[(0,i.clamp)(A<0?S.length+A:A,0,S.length-1)].push(...(0,u.hasOwnProperty)(l.runtimeContext,"forEachItem")?Ar(w,l.runtimeContext.forEachItem):w)}}var I=function(){(0,u.hasOwnProperty)(r,x)||(r[x]={type:"bricks",bricks:[]});var e=r[x];e.bricks=Z.flatMap(((t,r)=>r<e.bricks.length?t.concat(e.bricks[r]):t)),0===e.bricks.length&&delete r[x]};for(var[x,Z]of f.entries())I()}}return{[Bt]:n,[_t]:c}}function Ar(e,t){return e.map((e=>{var r;return(0,a.Z)((0,a.Z)({},e),{},{[Lt]:t,slots:Object.fromEntries(Object.entries(null!==(r=e.slots)&&void 0!==r?r:{}).map((e=>{var r,[n,a]=e;return[n,"routes"===a.type?{type:"routes",routes:Ir(a.routes,t)}:{type:"bricks",bricks:Ar(null!==(r=a.bricks)&&void 0!==r?r:[],t)}]})))})}))}function Ir(e,t){return e.map((e=>e.type&&"bricks"!==e.type?e:(0,a.Z)((0,a.Z)({},e),{},{bricks:Ar(e.bricks,t)})))}var xr=["properties","slots","children"];function Zr(e,t){function r(e){return(0,u.isObject)(e)?Array.isArray(e)?e.map(r):Object.fromEntries(Object.entries(e).map((e=>{var[t,a]=e;return(0,u.isObject)(a)&&"useBrick"===t?Array.isArray(a)?[t,a.map(n)]:[t,n(a)]:[t,r(a)]})).concat(Object.getOwnPropertySymbols(e).map((t=>[t,e[t]])))):e}function n(e){var{properties:o,slots:i,children:s}=e,c=(0,ue.Z)(e,xr),l=Qr(s,i),u=Object.fromEntries(Object.entries(null!=l?l:{}).map((e=>{var t,[r,a]=e;return[r,{type:"bricks",bricks:(null!==(t=a.bricks)&&void 0!==t?t:[]).map(n)}]})));return(0,a.Z)((0,a.Z)({},c),{},{properties:r(o),slots:u},Pr(t,c.ref,u))}return r(e)}var Or=["slots","children"],Tr=["properties","slots","children"];function Cr(e,t,r,n){var o=(0,i.uniqueId)("tpl-state-"),s=(0,a.Z)((0,a.Z)({},r.runtimeContext),{},{tplStateStoreId:o});delete s.forEachItem,delete s.formStateStoreId;var c=new kr("STATE",r);s.tplStateStoreMap.set(o,c),s.tplStateStoreScope&&s.tplStateStoreScope.push(c);var{bricks:l,proxy:u,state:p,contracts:d}=Et.get(e);!function(e){Ie(e,Ae)}(d),c.define(p,s,n);var{slots:f,children:v}=t,h=(0,ue.Z)(t,Or),m=(0,a.Z)((0,a.Z)({},h),{},{brick:e});r.tplHostMetadata={internalBricksByRef:new Map,tplStateStoreId:o,proxy:u};var g={properties:new Map,slots:new Map};if(null!=u&&u.properties)for(var[y,b]of Object.entries(u.properties)){var w=g.properties.get(b.ref);w||(w=[],g.properties.set(b.ref,w)),w.push({from:y,to:b})}if(null!=u&&u.slots)for(var[E,S]of Object.entries(u.slots)){var k=g.slots.get(S.ref);k||(k=[],g.slots.set(S.ref,k)),k.push({from:E,to:S})}var P={reversedProxies:g,asyncHostProperties:n,externalSlots:Qr(v,f),tplStateStoreId:o,hostBrick:r};return m.slots={"":{type:"bricks",bricks:l.map((e=>Rr(e,P)))}},m}function Rr(e,t){null===e.if&&delete e.if;var{properties:r,slots:n,children:o}=e,i=(0,ue.Z)(e,Tr),s=Qr(o,n),c=Object.fromEntries(Object.entries(null!=s?s:{}).map((e=>{var r,[n,a]=e;return[n,{type:"bricks",bricks:(null!==(r=a.bricks)&&void 0!==r?r:[]).map((e=>Rr(e,t)))}]})));return(0,a.Z)((0,a.Z)({},i),{},{properties:Zr(r,t),slots:c},Pr(t,i.ref,c))}var Br=function(e){return e[e.ROOT=1]="ROOT",e[e.BRICK=2]="BRICK",e}({}),_r="form-renderer.form-renderer",Lr=Symbol.for("form.stateStoreId");function Mr(e,t,r,n){var o,s,c="string"==typeof e?JSON.parse(e):e,l=(0,i.uniqueId)("form-state-"),p=(0,a.Z)((0,a.Z)({},r.runtimeContext),{},{formStateStoreId:l});delete p.forEachItem,delete p.tplStateStoreId;var d=new kr("FORM_STATE");p.formStateStoreMap.set(l,d),p.formStateStoreScope&&p.formStateStoreScope.push(d);var f=null!==(o=c.context)&&void 0!==o?o:[];f.some((e=>"params"===e.name))||f.push({name:"params"}),d.define(f,p,n);var v=Fr(c.formSchema,c.fields,l);return"forms.general-form"===v.brick&&t.events&&(v.events=function(e,t){var r=null!=e?e:{};for(var[n,a]of Object.entries(t))r[n]=(0,u.hasOwnProperty)(r,n)?[r[n],a].flat():a;return r}(v.events,t.events)),"boolean"!=typeof(null===(s=t.properties)||void 0===s?void 0:s.renderRoot)||t.properties.renderRoot?(0,a.Z)((0,a.Z)({},t),{},{slots:void 0,children:[{brick:"basic-bricks.micro-view",properties:{style:{padding:"12px"}},slots:{content:{bricks:[v],type:"bricks"}}}]}):(0,a.Z)((0,a.Z)({},t),{},{slots:void 0,children:[v]})}function Fr(e,t,r){var{id:n,bricks:o,events:i,context:s,mountPoint:c,instanceId:l}=e,{brick:p,properties:d}=e,f=t.find((e=>e.fieldId===n));if(f){var v=function(e){var t,r={id:e.fieldId,name:e.fieldId,label:e.name,dataset:{testid:e.fieldId}},n=()=>{var t,r;return{readOnly:null===(t=e.limit)||void 0===t?void 0:t.includes("READONLY"),required:null===(r=e.limit)||void 0===r?void 0:r.includes("REQUIRED")}};switch(e.fieldType){case"INT":t={brick:"forms.general-input-number",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{placeholder:e.description,precision:0,inputBoxStyle:{width:"100%"}})};break;case"BOOLEAN":t={brick:"forms.general-switch",properties:(0,a.Z)((0,a.Z)({},r),n())};break;case"FLOAT":t={brick:"forms.general-input-number",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{placeholder:e.description,inputBoxStyle:{width:"100%"}})};break;case"ENUM":t={brick:"forms.general-select",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{options:[{label:"",value:1},{label:"",value:2}],placeholder:e.description,inputBoxStyle:{width:"100%"}})};break;case"ENUMS":t={brick:"forms.general-select",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{mode:"multiple",options:[{label:"",value:1},{label:"",value:2}],placeholder:e.description,inputBoxStyle:{width:"100%"}})};break;case"DATE":case"TIME":t={brick:"forms.general-date-picker",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{placeholder:e.description})};break;case"IP":t={brick:"forms.general-input",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{placeholder:e.description,pattern:"((^s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))s*$)|(^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*$))",message:{pattern:"IP"}})};break;case"JSON":t={brick:"forms.general-textarea",properties:(0,a.Z)({},r)};break;case"ARRAY":t={brick:"forms.general-select",properties:(0,a.Z)({},r)};break;case"STRUCTURE":case"STRUCTURE_ARRAY":t={brick:"forms.cmdb-instance-select-panel",properties:(0,a.Z)((0,a.Z)({},r),n())};break;default:t={brick:"forms.general-input",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{placeholder:e.description})}}return t}(f);p||(p=v.brick),d=(0,a.Z)((0,a.Z)({},v.properties),d)}var h={brick:p,properties:d,iid:l,slot:c,events:i,context:s,children:Nr(o,t,r),[Lr]:r};return(0,u.hasOwnProperty)(e,"if")&&(h.if=e.if),h}function Nr(e,t,r){if(Array.isArray(e))return e.map((e=>Fr(e,t,r)))}var Ur=["blockingList","node","menuRequests","hasTrackingControls"],jr=["formData"];function Vr(e,t,r,n,a){return Dr.apply(this,arguments)}function Dr(){return Dr=(0,o.Z)((function*(e,t,r,n,o){var i=yield Ct(t,r),s={blockingList:[],menuRequests:[]};switch(i){case"missed":break;case"unauthenticated":s.unauthenticated=!0;break;default:var c=s.route=i.route,l=(0,a.Z)((0,a.Z)({},r),{},{match:i.match});switch(l.ctxStore.define(c.context,l),l.pendingPermissionsPreCheck.push(Ao(c,l)),c.type){case"redirect":var u;if("string"!=typeof(u="string"==typeof c.redirect?yield go(c.redirect,l):(yield Je((0,a.Z)({transform:"redirect"},c.redirect),l)).redirect))throw console.error("Unexpected redirect result:",u),new Error("Unexpected type of redirect result: ".concat(typeof u));s.redirect={path:u};break;case"routes":s.menuRequests.push(Jr(c.menu,l)),Yr(s,yield Vr(e,c.routes,l,n,o));break;default:s.menuRequests.push(Jr(c.menu,l)),Yr(s,yield $r(e,c.bricks,l,n,o))}}return s})),Dr.apply(this,arguments)}function $r(e,t,r,n,a,o,i){return qr.apply(this,arguments)}function qr(){return(qr=(0,o.Z)((function*(e,t,r,n,a,o,i){var s={blockingList:[],menuRequests:[]};return(yield Promise.all(t.map(((t,i)=>Wr(e,t,r,n,a,i,o&&new Map(o)))))).forEach(((t,r)=>{!i&&t.hasTrackingControls&&n.memoizeControlNode(a,r,t.node,e),Yr(s,t)})),s}))).apply(this,arguments)}function Wr(e,t,r,n,a,o){return Hr.apply(this,arguments)}function Hr(){return Hr=(0,o.Z)((function*(e,t,r,n,s,c){var l,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new Map,f={blockingList:[],menuRequests:[]};if(!t.brick)return t.template?console.error("Legacy templates are dropped in v3:",t):console.error("Invalid brick:",t),f;var v=t[_t],h=t[Lr],m=(0,a.Z)((0,a.Z)({},r),{},{tplStateStoreId:v,formStateStoreId:h});(0,u.hasOwnProperty)(t,Lt)&&(m.forEachItem=t[Lt]);var{context:g}=t;if(Array.isArray(g)&&g.length>0){var y=gt(m);yt(y,"Defining context on bricks","check your brick:",t),y||m.ctxStore.define(g,m)}if(m.pendingPermissionsPreCheck.push(Ao(t,m)),!(yield it(t,m)))return f;var b=t.brick;if(b.startsWith(":")){Kr(b);var{dataSource:w}=t,E=function(){var r=(0,o.Z)((function*(){var r,a=yield go(w,m),o=":forEach"===b?"":":switch"===b?String(a):a?"":"else",i=Qr(t.children,t.slots),c=i&&(0,u.hasOwnProperty)(i,o)&&(null===(r=i[o])||void 0===r?void 0:r.bricks);if(!Array.isArray(c))return f;switch(b){case":forEach":return Array.isArray(a)?zr(e,a,c,m,n,s,p):f;case":if":case":switch":return $r(e,c,m,n,s,p,!0)}}));return function(){return r.apply(this,arguments)}}(),S=yield E(),{contextNames:k,stateNames:P}=dt(w);if(k||P){S.hasTrackingControls=!0;var A=0,I=function(){var t=(0,o.Z)((function*(){var t=++A,r=yield E();r.blockingList.push(...[...m.tplStateStoreMap.values(),...m.formStateStoreMap.values()].map((e=>e.waitForAll())),...m.pendingPermissionsPreCheck),yield Promise.all(r.blockingList),A===t&&n.rerenderControlNode(s,c,r.node,e)}));return function(){return t.apply(this,arguments)}}(),x=(0,i.debounce)(I);if(k)for(var Z of k)m.ctxStore.onChange(Z,x);if(P)for(var O of P){var T=St(m,"STATE",': "'.concat(w,'"'));T.onChange(O,x)}}return S}/\.tpl-/.test(b)&&!Et.get(b)&&(yield Xr((0,d.loadBricksImperatively)([b],xa()),b,n.unknownBricks));var C=Pt(b,null===(l=m.app)||void 0===l?void 0:l.id);if(C){var R,B=null!==(R=p.get(C))&&void 0!==R?R:0;if(B>=10)throw new Error('Maximum custom template stack overflowed: "'.concat(C,'"'));p.set(C,B+1)}else b.includes("-")&&!customElements.get(b)&&(b===_r?customElements.define(_r,class extends HTMLElement{get $$typeof(){return"form-renderer"}}):f.blockingList.push(Xr((0,d.enqueueStableLoadBricks)([b],xa()),b,n.unknownBricks)));var _,L,M={tag:Br.BRICK,type:C||b,return:e,slotId:s,events:t.events,runtimeContext:m,portal:t.portal,iid:t.iid,ref:t.ref};if(f.node=M,b===_r){var F,N=null!==(F=t.properties)&&void 0!==F?F:{};({formData:_}=N),L=(0,ue.Z)(N,jr)}else L=t.properties;var U=[],j=[],V=function(){var e=(0,o.Z)((function*(){M.properties=yield ft(L,m,j);var e=t[Bt];if(e){var r;null!==(r=M.properties)&&void 0!==r||(M.properties={});var n=yield e;for(var[a,o]of Object.entries(n))M.properties[a]=o}return It(M,j),M.properties}));return function(){return e.apply(this,arguments)}}(),D=V();U.push(D),n.registerBrickLifeCycle(M,t.lifeCycle);var $,q=t;C?q=Cr(C,t,M,D):b===_r&&(q=Mr(_,t,M,D)),q.portal&&(M.slotId=void 0),C?delete($=(0,a.Z)({},m)).forEachItem:$=m;var W=function(){var e=(0,o.Z)((function*(){var e=Qr(q.children,q.slots);if(e){var t=yield Promise.all(Object.entries(e).map((e=>{var[t,r]=e;return"routes"!==r.type?$r(M,r.bricks,$,n,t,p):Vr(M,r.routes,$,n,t)}))),r=(0,a.Z)((0,a.Z)({},f),{},{node:void 0,blockingList:[]});for(var o of t)Yr(r,o);r.node&&(M.child=r.node),Yr(f,(0,a.Z)((0,a.Z)({},r),{},{node:void 0}))}}));return function(){return e.apply(this,arguments)}}();return U.push(W()),yield Promise.all(U),f})),Hr.apply(this,arguments)}function Kr(e){if(":forEach"!==e&&":if"!==e&&":switch"!==e)throw new Error('Unknown storyboard control node: "'.concat(e,'"'))}function zr(e,t,r,n,a,o,i){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,o.Z)((function*(e,t,r,n,o,i,s){var c={blockingList:[],menuRequests:[]},l=yield Promise.all(t.map(((t,c)=>Promise.all(r.map(((r,l)=>Wr(e,r,(0,a.Z)((0,a.Z)({},n),{},{forEachItem:t}),o,i,c*l,s&&new Map(s))))))));for(var u of l.flat())Yr(c,u);return c}))).apply(this,arguments)}function Jr(e,t){if(e){if("brick"===e.type)throw console.error("Set menu with brick is dropped in v3:",e),new Error("Set menu with brick is dropped in v3");if("resolve"!==e.type)return go(e,t);console.warn("Set menu with resolve is not supported in v3 yet:",e)}}function Yr(e,t){var{blockingList:r,node:n,menuRequests:a,hasTrackingControls:o}=t,i=(0,ue.Z)(t,Ur);if(e.blockingList.push(...r),e.menuRequests.push(...a),n)if(e.node){for(var s=e.node;s.sibling;)s=s.sibling;s.sibling=n}else e.node=n;Object.assign(e,i)}function Qr(e,t){var r=t;if(Array.isArray(e)&&!r)for(var n of(r={},e)){var a,o=null!==(a=n.slot)&&void 0!==a?a:"";(0,u.hasOwnProperty)(r,o)||(r[o]={type:"bricks",bricks:[]}),r[o].bricks.push(n)}return r}function Xr(e,t,r){return"silent"===r?e.catch((e=>{console.error('Load brick "'.concat(t,'" failed:'),e)})):e}function en(e){var t,{ref:r,runtimeContext:n,element:a}=e;if(r&&n.tplStateStoreId){var{hostBrick:o}=St(n,"bindTemplateProxy"),i=o.tplHostMetadata;i.internalBricksByRef.set(r,e);var s=null===(t=i.proxy)||void 0===t?void 0:t.events;if(s){var c=function(e){if(u.ref===r){var t,n,i,s=t=>{t.bubbles&&t.stopPropagation(),o.element.dispatchEvent(new CustomEvent(e,{detail:t.detail,bubbles:t.bubbles,cancelable:t.cancelable,composed:t.composed}))},c=null!==(t=u.refEvent)&&void 0!==t?t:e;a.addEventListener(c,s),null!==(i=(n=a).$$proxyListeners)&&void 0!==i||(n.$$proxyListeners=[]),a.$$proxyListeners.push([c,s])}};for(var[l,u]of Object.entries(s))c(l)}}}function tn(e){var{ref:t,runtimeContext:r,element:n}=e;if(r.tplStateStoreId&&t){var{hostBrick:a}=St(r,"unbindTemplateProxy"),o=a.tplHostMetadata;for(var[i,s]of(o.internalBricksByRef.delete(t),null!==(c=n.$$proxyListeners)&&void 0!==c?c:[])){var c;n.removeEventListener(i,s)}delete n.$$proxyListeners}}function rn(e){e.innerHTML=""}function nn(e,t){for(var r=e.child,n=[];r;){var a=r.type;a.includes("-")&&!customElements.get(a)&&console.error("Undefined custom element: ".concat(a)),"basic-bricks.script-brick"===a&&console.warn("`basic-bricks.script-brick` is deprecated, please take caution when using it");var o=t&&r===e.child?t:document.createElement(a);if(r.element=o,r.slotId&&o.setAttribute("slot",r.slotId),r.iid&&(o.dataset.iid=r.iid),ht(o,r.properties),Xt(o,r.events,r.runtimeContext),r.tplHostMetadata&&(o.$$tplStateStore=St({tplStateStoreId:r.tplHostMetadata.tplStateStoreId,tplStateStoreMap:r.runtimeContext.tplStateStoreMap},"mount")),en(r),r.portal?n.push(o):r.return&&(r.return.childElements||(r.return.childElements=[]),r.return.childElements.push(o)),r.child)r=r.child;else if(r.sibling)r=r.sibling;else{for(var i,s=r.return;s;){var c;if(s.childElements)s.tag===Br.ROOT?null===(c=s.container)||void 0===c||c.append(...s.childElements):s.element.append(...s.childElements),s.childElements=void 0;if(s.tag===Br.ROOT&&n.length>0&&("function"==typeof s.createPortal?s.createPortal():s.createPortal).append(...n),s.sibling)break;s=s.return}r=null===(i=s)||void 0===i?void 0:i.sibling}}}var an,on=["onMount","onUnmount","onMediaChange","onScrollIntoView"],sn=["onBeforePageLoad","onPageLoad","onPageLeave","onBeforePageLeave","onAnchorLoad","onAnchorUnload"],cn=new WeakMap,ln=new WeakMap,un=new WeakMap,pn=new WeakMap,dn=new WeakSet,fn=new WeakSet,vn=new WeakSet,hn=new WeakSet;class mn{constructor(e,t){var r;(0,be.Z)(this,hn),(0,be.Z)(this,vn),(0,be.Z)(this,fn),(0,be.Z)(this,dn),(0,Mt.Z)(this,"scope",void 0),(0,Mt.Z)(this,"unknownBricks",void 0),(0,v.Z)(this,cn,{writable:!0,value:{onBeforePageLoad:[],onPageLoad:[],onPageLeave:[],onBeforePageLeave:[],onAnchorLoad:[],onAnchorUnload:[],onMediaChange:[],onScrollIntoView:[],onMount:[],onUnmount:[]}}),(0,v.Z)(this,ln,{writable:!0,value:new Map}),(0,v.Z)(this,un,{writable:!0,value:void 0}),(0,v.Z)(this,pn,{writable:!0,value:void 0}),this.scope=e,this.unknownBricks=null!==(r=null==t?void 0:t.unknownBricks)&&void 0!==r?r:"throw"}registerBrickLifeCycle(e,t){if(t){var r=[...on,..."page"===this.scope?sn:[]];for(var n of r){var a=t[n];a&&(0,h.Z)(this,cn)[n].push({brick:e,handlers:a})}(0,i.isEmpty)(t.useResolves)||console.error("`lifeCycle.useResolves` is dropped in v3:",t)}}memoizeControlNode(e,t,r,n){(0,h.Z)(this,pn)||(0,se.Z)(this,pn,new WeakMap);var a="".concat(null!=e?e:"",".").concat(t),o=(0,h.Z)(this,pn).get(n);o||(o=new Map,(0,h.Z)(this,pn).set(n,o)),o.set(a,{node:r,last:En(r),lastNormal:Sn(r),lastPortal:kn(r)})}rerenderControlNode(e,t,r,n){var a,o,i,s,c,l="".concat(null!=e?e:"",".").concat(t),u=(0,h.Z)(this,pn).get(n).get(l),{node:p,last:d,lastNormal:f,lastPortal:v}=u,m=null!==(a=null==f||null===(o=f.element)||void 0===o?void 0:o.nextSibling)&&void 0!==a?a:null,g=null!==(i=null==v||null===(s=v.element)||void 0===s?void 0:s.nextSibling)&&void 0!==i?i:null,y=En(r);u.node=r,u.last=y,u.lastNormal=Sn(r),u.lastPortal=kn(r);for(var b=n.child;b&&b!==d;){if(b.sibling===p){c=b;break}b=b.sibling}var w=document.createDocumentFragment(),E=document.createDocumentFragment(),S={tag:Br.ROOT,container:w,createPortal:E,child:r};for(b=r;b;)b.return=S,b=b.sibling;var k,P,A=Pn(p,d);for((0,we.Z)(this,dn,gn).call(this,A),nn(S),c?c.sibling=r:n.child=r,y&&(y.sibling=null==d?void 0:d.sibling),b=r;b;)b.return=n,b=b.sibling;if(n.tag===Br.ROOT?null===(k=n.container)||void 0===k||k.insertBefore(w,m):null===(P=n.element)||void 0===P||P.insertBefore(w,m),E.childNodes.length>0){for(var I,x=r;x&&x.return;)x=x.return;if((null===(I=x)||void 0===I?void 0:I.tag)!==Br.ROOT)throw new Error("Cannot find render root node");("function"==typeof x.createPortal?x.createPortal():x.createPortal).insertBefore(E,g)}var Z=Pn(r,y);(0,we.Z)(this,fn,yn).call(this,Z)}dispose(){for(var e of Object.values((0,h.Z)(this,cn)))e.length=0;for(var t of(0,h.Z)(this,ln).values()){for(var r of t)r.disconnect();t.length=0}(0,h.Z)(this,ln).clear(),(0,h.Z)(this,un)&&(te.removeEventListener("change",(0,h.Z)(this,un)),(0,se.Z)(this,un,void 0)),(0,se.Z)(this,pn,void 0)}dispatchBeforePageLoad(){(0,we.Z)(this,vn,bn).call(this,"onBeforePageLoad",new CustomEvent("page.beforeLoad"))}dispatchPageLoad(){var e=new CustomEvent("page.load");(0,we.Z)(this,vn,bn).call(this,"onPageLoad",e),window.dispatchEvent(e)}dispatchBeforePageLeave(e){(0,we.Z)(this,vn,bn).call(this,"onBeforePageLeave",new CustomEvent("page.beforeLeave",{detail:e}))}dispatchPageLeave(){(0,we.Z)(this,vn,bn).call(this,"onPageLeave",new CustomEvent("page.leave"))}dispatchAnchorLoad(){var{hash:e}=ye().location;e&&"#"!==e?(0,we.Z)(this,vn,bn).call(this,"onAnchorLoad",new CustomEvent("anchor.load",{detail:{hash:e,anchor:e.substring(1)}})):(0,we.Z)(this,vn,bn).call(this,"onAnchorUnload",new CustomEvent("anchor.unload"))}initializeScrollIntoView(){for(var{brick:e,handlers:t}of(0,h.Z)(this,cn).onScrollIntoView)(0,we.Z)(this,hn,wn).call(this,e,t)}initializeMediaChange(){(0,se.Z)(this,un,(e=>{(0,we.Z)(this,vn,bn).call(this,"onMediaChange",new CustomEvent("media.change",{detail:x(e.detail)}))})),te.addEventListener("change",(0,h.Z)(this,un))}dispatchOnMount(){(0,we.Z)(this,vn,bn).call(this,"onMount",new CustomEvent("mount"))}dispatchOnUnmount(){(0,we.Z)(this,vn,bn).call(this,"onUnmount",new CustomEvent("unmount"))}}function gn(e){var t=[...on,..."page"===this.scope?sn:[]],r=[];for(var n of t){var a=(0,i.remove)((0,h.Z)(this,cn)[n],(t=>e.has(t.brick)));"onUnmount"===n&&r.push(...a)}for(var o of e){var s,c,l=(0,h.Z)(this,ln).get(o);if(null!=l&&l.length){for(var u of l)u.disconnect();l.length=0,(0,h.Z)(this,ln).delete(o)}tn(o),null===(s=o.element)||void 0===s||delete s.$$tplStateStore,null===(c=o.element)||void 0===c||c.remove()}var p=new CustomEvent("unmount");for(var{brick:d,handlers:f}of r)nr(f,d.runtimeContext,d)(p)}function yn(e){var t=new CustomEvent("mount");for(var{brick:r,handlers:n}of(0,h.Z)(this,cn).onMount)e.has(r)&&nr(n,r.runtimeContext,r)(t);for(var{brick:a,handlers:o}of(0,h.Z)(this,cn).onScrollIntoView)e.has(a)&&(0,we.Z)(this,hn,wn).call(this,a,o)}function bn(e,t){for(var{brick:r,handlers:n}of(0,h.Z)(this,cn)[e])nr(n,r.runtimeContext,r)(t)}function wn(e,t){var r,n=null!==(r=t.threshold)&&void 0!==r?r:.1,a=new IntersectionObserver(((r,a)=>{r.forEach((r=>{r.isIntersecting&&r.intersectionRatio>=n&&(nr(t.handlers,e.runtimeContext,e)(new CustomEvent("scroll.into.view")),a.disconnect())}))}),{threshold:n});a.observe(e.element);var o=(0,h.Z)(this,ln).get(e);o||(o=[],(0,h.Z)(this,ln).set(e,o)),o.push(a)}function En(e){for(var t=e;null!==(r=t)&&void 0!==r&&r.sibling;){var r;t=t.sibling}return t}function Sn(e){for(var t,r=e;r;)r.portal||(t=r),r=r.sibling;return t}function kn(e){for(var t,r=e;r;)if(r.portal&&(t=r),r.child)r=r.child;else if(r.sibling)r=r.sibling;else{for(var n,a=r.return;a&&!a.sibling;)a=a.return;r=null===(n=a)||void 0===n?void 0:n.sibling}return t}function Pn(e,t){for(var r=new Set,n=e;n;)if(r.add(n),n.child)n=n.child;else{if(n===t)break;if(n.sibling)n=n.sibling;else{for(var a,o=n.return;o&&o!==t&&!o.sibling;)o=o.return;if(o===t)break;n=null===(a=o)||void 0===a?void 0:a.sibling}}return r}function An(){if(!an){if(an={isInIframe:!1,isInIframeOfSameSite:!1,isInIframeOfNext:!1,isInIframeOfVisualBuilder:!1,isInIframeOfLegacyConsole:!1},window!==window.parent){an.isInIframe=!0;try{if(window.origin===window.parent.origin){an.isInIframeOfSameSite=!0;var e="/next/"===$(),t=window.parent.location.pathname,r=t.startsWith("/next/");an.isInIframeOfNext=0==(Number(e)^Number(r)),an.isInIframeOfVisualBuilder=t.startsWith("".concat(r?"/next":"","/visual-builder/")),an.isInIframeOfLegacyConsole=e&&!r}}catch(e){}}Object.freeze(an)}return an}var In,xn=new WeakSet;function Zn(e){if((0,u.isObject)(e)&&!On(e))if(xn.add(e),Array.isArray(e))e.forEach(Zn);else{var t=Object.getPrototypeOf(e);t&&t.constructor!==Object||Object.values(e).forEach(Zn)}}function On(e){return xn.has(e)}function Tn(){xn=new WeakSet}function Cn(e){var t;if(!e.$$registerCustomTemplateProcessed){e.$$registerCustomTemplateProcessed=!0;var r=null===(t=e.meta)||void 0===t?void 0:t.customTemplates;if(Array.isArray(r))for(var n of r){var a=n.name.includes(".")?n.name:"".concat(e.app.id,".").concat(n.name);Et.define(a,n)}}}function Rn(e){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,o.Z)((function*(e){if(!e.$$fulfilled)return e.$$fulfilling||(e.$$fulfilling=_n(e)),e.$$fulfilling}))).apply(this,arguments)}function _n(e){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,o.Z)((function*(e){var t;yield null==wa||null===(t=wa.fulfilStoryboard)||void 0===t?void 0:t.call(wa,e),b(e),Object.assign(e,{$$fulfilled:!0,$$fulfilling:null})}))).apply(this,arguments)}var Mn=r(5049),Fn=r(9480);function Nn(e,t){return function(r,n,a){if(n.name===e){var o=a[a.length-1],i=a[a.length-2];if("CallExpression"===(null==i?void 0:i.node.type)&&"callee"===(null==i?void 0:i.key)&&"MemberExpression"===(null==o?void 0:o.node.type)&&"object"===o.key&&(o.node.computed?"Literal"===o.node.property.type&&o.node.property.value===t:"Identifier"===o.node.property.type&&o.node.property.name===t)){var s=i.node.arguments;if(s.length>0){var c=s[0];"Literal"===c.type&&"string"==typeof c.value?r.usedArgs.add(c.value):r.hasNonStaticUsage=!0}}}}}var Un=Nn("APP","getMenu"),jn=Nn("INSTALLED_APPS","has"),Vn=new Map,Dn=new Map;function $n(e){if(window.STANDALONE_MICRO_APPS&&!window.NO_AUTH_GUARD){var t=function(e){var t,r={usedArgs:new Set},{customTemplates:n,menus:a}=null!==(t=e.meta)&&void 0!==t?t:{};return(0,s.traverseStoryboardExpressions)([e.routes,n,a],((e,t)=>{jn(r,e,t)}),"INSTALLED_APPS"),[...r.usedArgs]}(e),r=[];for(var n of t)Vn.has(n)||Ca(n)||r.push(n);if(0===r.length)return;var o=(0,Mn.$)({query:{appId:{$in:r}},fields:["appId","currentVersion","installStatus"]}).catch((e=>{console.error("Get off site standalone micro-apps failed",e)})),i=function(e){Vn.set(e,o.then((t=>{var r,n=null==t||null===(r=t.list)||void 0===r?void 0:r.find((t=>t.appId===e)),o=n?(0,a.Z)((0,a.Z)({},n),{},{id:e}):void 0;return Dn.set(e,o),o})))};for(var c of r)i(c)}}function qn(e){return Promise.all(e.map((e=>Vn.get(e))))}function Wn(e,t){var r=Ca(e);if(!r&&window.STANDALONE_MICRO_APPS&&(r=Dn.get(e)),!r||"running"===r.installStatus)return!1;if(!t||!r.currentVersion)return!0;var n=t.match(/^([><]=?|=)(.*)$/);try{if(!n)throw new TypeError("Invalid match version: ".concat(t));return(0,Fn.qu)(r.currentVersion,n[2],n[1])}catch(e){console.error(e)}return!1}function Hn(e){if(window.parent===window)return e;var t=e,r=(0,i.findLastIndex)(t,(e=>e.path.startsWith("${APP.homepage}/_dev_only_/template-preview/")));t=[...t.slice(0,r+1),{path:"${APP.homepage}/_dev_only_/template-preview/:templateId",bricks:[{brick:"span"}],menu:!1,exact:!0},...t.slice(r+1)];var n=(0,i.findLastIndex)(t,(e=>e.path.startsWith("${APP.homepage}/_dev_only_/snippet-preview/")));return[...t.slice(0,n+1),{path:"${APP.homepage}/_dev_only_/snippet-preview/:snippetId",bricks:[{brick:"span"}],menu:!1,exact:!0},...t.slice(n+1)]}var Kn=new WeakMap,zn=new WeakMap,Gn=new WeakMap,Jn=new WeakMap,Yn=new WeakMap,Qn=new WeakMap,Xn=new WeakMap,ea=new WeakMap,ta=new WeakMap,ra=new WeakMap,na=new WeakMap,aa=new WeakMap,oa=new WeakSet,ia=new WeakSet,sa=new WeakSet,ca=new WeakSet;class la{constructor(e){(0,be.Z)(this,ca),(0,be.Z)(this,sa),(0,be.Z)(this,ia),(0,be.Z)(this,oa),(0,v.Z)(this,Kn,{writable:!0,value:void 0}),(0,v.Z)(this,zn,{writable:!0,value:!1}),(0,v.Z)(this,Gn,{writable:!0,value:void 0}),(0,v.Z)(this,Jn,{writable:!0,value:void 0}),(0,v.Z)(this,Yn,{writable:!0,value:void 0}),(0,v.Z)(this,Qn,{writable:!0,value:void 0}),(0,v.Z)(this,Xn,{writable:!0,value:new Set}),(0,v.Z)(this,ea,{writable:!0,value:0}),(0,v.Z)(this,ta,{writable:!0,value:void 0}),(0,v.Z)(this,ra,{writable:!0,value:void 0}),(0,v.Z)(this,na,{writable:!0,value:void 0}),(0,v.Z)(this,aa,{writable:!0,value:void 0}),(0,se.Z)(this,Kn,e);var t=ye();window.addEventListener("beforeunload",(e=>{(0,we.Z)(this,oa,ua).call(this,{})?(e.preventDefault(),e.returnValue=""):delete e.returnValue})),t.block(((e,t)=>(0,we.Z)(this,oa,ua).call(this,{location:e,action:t})))}getRenderId(){return(0,h.Z)(this,ta)}getRuntimeContext(){return(0,h.Z)(this,Yn)}getRecentApps(){return{currentApp:(0,h.Z)(this,ra),previousApp:(0,h.Z)(this,na)}}getNavConfig(){return(0,h.Z)(this,aa)}bootstrap(){window.AbortController&&(In=new AbortController,Ee.http.interceptors.request.use((e=>{var t;return(0,a.Z)((0,a.Z)({},e),{},{options:(0,a.Z)((0,a.Z)({},e.options),{},{signal:null!==(t=e.options)&&void 0!==t&&t.noAbortOnRouteChange?null:In.signal})})})));var e=ye();return(0,se.Z)(this,Gn,e.location),e.listen(((e,t)=>{var r,n,o,i=!1,s={hash:void 0,state:void 0};if(void 0!==e.key&&("POP"!==t||void 0!==(0,h.Z)(this,Gn).key&&!1!==(null===(r=(0,h.Z)(this,Gn).state)||void 0===r?void 0:r.notify))||(s.key=void 0),((0,le.locationsAreEqual)((0,a.Z)((0,a.Z)({},(0,h.Z)(this,Gn)),s),(0,a.Z)((0,a.Z)({},e),s))||"POP"!==t&&!1===(null===(n=e.state)||void 0===n?void 0:n.notify))&&(i=!0),i)(0,se.Z)(this,Gn,e);else{if(In&&(In.abort(),In=new AbortController),(0,se.Z)(this,Gn,e),null===(o=(0,h.Z)(this,Qn))||void 0===o||o.dispatchPageLeave(),"POP"===t&&de(pe((0,h.Z)(this,Kn),e.pathname)))return void window.location.reload();(0,h.Z)(this,zn)?(0,se.Z)(this,Jn,e):(0,we.Z)(this,sa,da).call(this,e).catch(Yt)}})),(0,we.Z)(this,sa,da).call(this,e.location)}}function ua(e){var t,r=ye(),n=r.getBlockMessage();null===(t=(0,h.Z)(this,Qn))||void 0===t||t.dispatchBeforePageLeave(e);var a=r.getBlockMessage();return!n&&a&&r.unblock(),a}function pa(e,t,r){var n,a;if((0,se.Z)(this,ea,(n=(0,h.Z)(this,ea),a=n++,n)),a>10){var o='Infinite redirect detected: from "'.concat(r.pathname).concat(r.search).concat(r.hash,'" to "').concat(e,'"');throw new Error(o)}ye().replace(e,t)}function da(e){return fa.apply(this,arguments)}function fa(){return(fa=(0,o.Z)((function*(e){(0,se.Z)(this,zn,!0);try{yield(0,we.Z)(this,ca,va).call(this,e)}finally{if((0,se.Z)(this,zn,!1),(0,h.Z)(this,Jn)){var t=(0,h.Z)(this,Jn);(0,se.Z)(this,Jn,void 0),yield(0,we.Z)(this,sa,da).call(this,t)}}}))).apply(this,arguments)}function va(e){return ha.apply(this,arguments)}function ha(){return(ha=(0,o.Z)((function*(e){var t;(0,se.Z)(this,ta,(0,i.uniqueId)("render-id-1")),Tn(),Qe(),Ze(),ye().unblock();var r=pe((0,h.Z)(this,Kn),e.pathname),n=null===(t=(0,h.Z)(this,Yn))||void 0===t?void 0:t.app;null!=r&&r.app&&(yield Rn(r));var o=(0,se.Z)(this,ra,null==r?void 0:r.app),s=n&&o?n.id!==o.id:n!==o,c=ka().getFeatureFlags(),l=(0,h.Z)(this,Qn),u=(t,r)=>{(0,h.Z)(this,Xn).add(l),(0,we.Z)(this,ia,pa).call(this,t,r,e)},p=()=>{var t=c["sso-enabled"]?"/sso-auth/login":"/auth/login";u(t,{from:e})},f=document.querySelector("#main-mount-point"),v=document.querySelector("#portal-mount-point"),m={tag:Br.ROOT,container:f,createPortal:v},g=()=>{for(var e of(rn(f),rn(v),(0,h.Z)(this,Xn).add(l),(0,h.Z)(this,Xn)))e&&(e.dispatchOnUnmount(),e.dispose());(0,h.Z)(this,Xn).clear(),R(o&&(F()[o.id]||o.theme)||"light"),U("default"),s&&((0,se.Z)(this,na,n),window.dispatchEvent(new CustomEvent("app.change",{detail:{previousApp:n,currentApp:o}})))};if(o){var y,b;$n(r);var w=(0,se.Z)(this,Yn,{app:o,location:e,query:new URLSearchParams(e.search),flags:c,sys:(0,a.Z)((0,a.Z)({},Bo()),An()),ctxStore:new kr("CTX"),pendingPermissionsPreCheck:[Po(r)],tplStateStoreMap:new Map,formStateStoreMap:new Map}),E=(0,se.Z)(this,Qn,new mn("page"));(0,se.Z)(this,aa,void 0),Cn(r),J(null===(y=r.meta)||void 0===y?void 0:y.functions,o),xe(null===(b=r.meta)||void 0===b?void 0:b.contracts);var S,k=!1;try{if((S=yield Vr(m,Hn(r.routes),w,E)).unauthenticated)return void p();if(S.redirect)return void u(S.redirect.path,S.redirect.state);(0,se.Z)(this,ea,0),(0,d.flushStableLoadBricks)(),yield Promise.all([...S.blockingList,...[w.ctxStore,...w.tplStateStoreMap.values(),...w.formStateStoreMap.values()].map((e=>e.waitForAll())),...w.pendingPermissionsPreCheck]);var P=yield Promise.all(S.menuRequests);(0,se.Z)(this,aa,ma(P))}catch(e){if(console.error("Router failed:",e),Kt(e)&&!window.NO_AUTH_GUARD)return void p();if(e instanceof Ee.HttpAbortError)return void(0,h.Z)(this,Xn).add(l);k=!0,S={node:{tag:Br.BRICK,type:"div",properties:{textContent:Ht(e)},runtimeContext:null,return:m},blockingList:[],menuRequests:[]}}if(m.child=S.node,g(),S.route&&"routes"!==S.route.type||k)return k||E.dispatchBeforePageLoad(),L(),V(),nn(m),window.scrollTo(0,0),void(k||(E.dispatchPageLoad(),E.dispatchAnchorLoad(),E.dispatchOnMount(),E.initializeScrollIntoView(),E.initializeMediaChange()))}else{if(!window.NO_AUTH_GUARD&&!Lo())return void p();g()}L(),V();var A={tag:Br.BRICK,type:"div",properties:{textContent:"Page not found"},runtimeContext:null,return:m};m.child=A,nn(m),window.scrollTo(0,0)}))).apply(this,arguments)}function ma(e){var t={breadcrumb:[]};for(var r of e)if(r){var{breadcrumb:n}=r;n&&(n.overwrite?t.breadcrumb=n.items:t.breadcrumb.push(...n.items))}return t}var ga,ya,ba,wa,Ea="undefined"!=typeof BRICK_PACKAGES?BRICK_PACKAGES:[];function Sa(e){if(ga)throw new Error("Cannot create multiple runtimes");return wa=null==e?void 0:e.hooks,(0,y.initializeI18n)($t,qt),ce.locale(y.i18n.language),y.i18n.on("languageChanged",(()=>{ce.locale(y.i18n.language)})),ge(),ga=new Ia}function ka(){return ga}var Pa=new WeakMap,Aa=new WeakMap;class Ia{constructor(){(0,v.Z)(this,Pa,{writable:!0,value:!1}),(0,v.Z)(this,Aa,{writable:!0,value:!1})}initialize(e){if((0,h.Z)(this,Pa))throw new Error("The runtime cannot be initialized more than once");var t;(0,se.Z)(this,Pa,!0),function(e){if(Array.isArray(e.storyboards)){var t=function(){if(r.locales){var e="tmp/".concat(r.id);Object.entries(r.locales).forEach((t=>{var[r,n]=t;y.i18n.addResourceBundle(r,e,n)})),r.localeName=y.i18n.getFixedT(null,e)("name",r.name),Object.keys(r.locales).forEach((t=>{y.i18n.removeResourceBundle(t,e)}))}else r.localeName=r.name};for(var{app:r}of e.storyboards)t()}(0,u.isObject)(e.settings)&&(0,u.deepFreeze)(e.settings),e.brickPackages&&(0,u.deepFreeze)(e.brickPackages)}(e),ya=e,t="shoelace.show-notification",(0,this.loadBricks)([t]).then((()=>{Gt=document.createElement(t)}),(e=>{console.error("Load notification service failed:",e)})),function(e,t){t([e]).then((()=>{Ut=document.createElement(e)}),(e=>{console.error("Load dialog service failed:",e)}))}("shoelace.show-dialog",this.loadBricks)}bootstrap(e){var t=this;return(0,o.Z)((function*(){if(e&&t.initialize(e),(0,h.Z)(t,Aa))throw new Error("The runtime cannot be bootstrapped more than once");(0,se.Z)(t,Aa,!0),ba=new la(ya.storyboards),yield ba.bootstrap()}))()}getRecentApps(){var e,t;return null!==(e=null===(t=ba)||void 0===t?void 0:t.getRecentApps())&&void 0!==e?e:{}}getCurrentApp(){var e;return null===(e=ba)||void 0===e?void 0:e.getRecentApps().currentApp}getFeatureFlags(){var e,t,r,n,o,i;return(0,a.Z)((0,a.Z)((0,a.Z)({},null===(e=ya)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.featureFlags),null===(r=ba)||void 0===r||null===(n=r.getRecentApps().currentApp)||void 0===n||null===(o=n.config)||void 0===o||null===(i=o.settings)||void 0===i?void 0:i.featureFlags),{},{"migrate-to-brick-next-v3":!0})}getMiscSettings(){var e,t,r,n,o,i;return(0,a.Z)((0,a.Z)({},null===(e=ya)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.misc),null===(r=ba)||void 0===r||null===(n=r.getRecentApps().currentApp)||void 0===n||null===(o=n.config)||void 0===o||null===(i=o.settings)||void 0===i?void 0:i.misc)}getBrandSettings(){var e,t;return(0,a.Z)({base_title:"DevOps "},null===(e=ya)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.brand)}getLaunchpadSettings(){var e,t;return(0,a.Z)({columns:7,rows:4},null===(e=ya)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.launchpad)}getDesktops(){var e,t;return null!==(e=null===(t=ya)||void 0===t?void 0:t.desktops)&&void 0!==e?e:[]}getLaunchpadSiteMap(){var e,t;return null!==(e=null===(t=ya)||void 0===t?void 0:t.siteSort)&&void 0!==e?e:[]}toggleLaunchpadEffect(e){document.body.classList.toggle("launchpad-open",e)}applyPageTitle(e){var t=this.getBrandSettings().base_title;document.title=e?"".concat(e," - ").concat(t):t}getNavConfig(){var e;return null===(e=ba)||void 0===e?void 0:e.getNavConfig()}loadBricks(e){return(0,d.loadBricksImperatively)(e,xa())}}function xa(){var e,t;return null!==(e=null===(t=ya)||void 0===t?void 0:t.brickPackages)&&void 0!==e?e:Ea}function Za(){var e;return null===(e=ba)||void 0===e?void 0:e.getRenderId()}function Oa(){var e;return null===(e=ba)||void 0===e?void 0:e.getRuntimeContext()}function Ta(e){var t,r;return null===(t=ya)||void 0===t||null===(r=t.storyboards)||void 0===r?void 0:r.find((t=>t.app.id===e))}function Ca(e){var t;return null===(t=Ta(e))||void 0===t?void 0:t.app}var Ra=new Map,Ba=new Proxy(Object.freeze({}),{get:(e,t)=>Ra.get(t)});function _a(e,t,r){if(Ra.has(e))throw new Error('Widget functions of "'.concat(e,'" already registered'));var{storyboardFunctions:n,registerStoryboardFunctions:a}=z({widgetId:e,widgetVersion:r});Ra.set(e,n),a(t)}var La=r(2021),Ma=Symbol("appId"),Fa=Symbol("menuI18nNamespace"),Na=Symbol("overrideApp");function Ua(e,t,r){return ja.apply(this,arguments)}function ja(){return(ja=(0,o.Z)((function*(e,t,r){if(e.dynamicItems&&e.itemsResolve){var n=e.app[0].appId,o=t;if(n!==t.app.id){var i=window.STANDALONE_MICRO_APPS?e.overrideApp:Ca(n);o=(0,a.Z)((0,a.Z)({},t),{},{overrideApp:i,appendI18nNamespace:r.get(e)})}var s=yield Je((0,a.Z)({transform:"items"},e.itemsResolve),o);e.items=s.items}}))).apply(this,arguments)}function Va(e,t){return Da.apply(this,arguments)}function Da(){return(Da=(0,o.Z)((function*(e,t){var r=e.find((e=>"inject"!==e.type));if(r){var n=[],o=new Map,i=new WeakMap,s=function*(){if(c.i18n){var e=w("menu","".concat(c.menuId,"~").concat(c.app[0].appId,"+").concat(c.instanceId));Object.entries(c.i18n).forEach((t=>{var[r,n]=t;y.i18n.addResourceBundle(r,e,n)})),i.set(c,e)}};for(var c of e)yield*s();for(var l of(yield Promise.all(e.map((e=>Ua(e,t,i)))),e)){var u;if(null!==(u=l.items)&&void 0!==u&&u.length)if("inject"===l.type&&l.injectMenuGroupId){var p=o.get(l.injectMenuGroupId);p||(p=[],o.set(l.injectMenuGroupId,p)),p.push(l)}else n.push(l)}return(0,a.Z)((0,a.Z)({},r),{},{items:n.flatMap((e=>$a(e.items,e,o,i))),[Fa]:i.get(r),[Na]:r.overrideApp})}}))).apply(this,arguments)}function $a(e,t,r,n){return null==e?void 0:e.map((e=>{var o,i=e.groupId&&r.get(e.groupId);return i&&r.delete(e.groupId),(0,a.Z)((0,a.Z)({},e),{},{children:(null!==(o=$a(e.children,t,r,n))&&void 0!==o?o:[]).concat(i?i.flatMap((e=>$a(e.items,e,r,n))):[]),[Ma]:t.app[0].appId,[Fa]:n.get(t),[Na]:t.overrideApp})}))}function qa(e){e.items=Wa(e.items).map((e=>(0,a.Z)((0,a.Z)({},e),{},{children:Wa(e.children)})))}function Wa(e){return(0,i.sortBy)(e,(e=>{var t;return null!==(t=e.sort)&&void 0!==t?t:-1/0}))}var Ha=["children"];function Ka(e,t,r){var n=r;if(t!==r.app.id){var o=window.STANDALONE_MICRO_APPS?e[Na]:Ca(t);n=(0,a.Z)((0,a.Z)({},r),{},{overrideApp:o,appendI18nNamespace:e[Fa]})}return go(e,n,{ignoreSymbols:!0})}function za(e,t){return Promise.all(e.map(function(){var e=(0,o.Z)((function*(e){var{children:r}=e,n=(0,ue.Z)(e,Ha),[o,i]=yield Promise.all([Ka(n,n[Ma],t),r&&(yield za(r,t))]);return(0,a.Z)((0,a.Z)({},o),{},{children:i})}));return function(t){return e.apply(this,arguments)}}()))}var Ga=r(682),Ja=new Map;function Ya(e){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,o.Z)((function*(e){if(e.title||(0,i.isEmpty)(e.titleDataSource))return e.title;var t=JSON.stringify(e.titleDataSource);if(Ja.has(t))return Ja.get(t);var r,{objectId:n,instanceId:a,attributeId:o}=e.titleDataSource,s=null!=o?o:"name",c=yield(0,Ga.q)(n,a,{fields:s});if("#showKey"===o&&Array.isArray(c[s])){var[l,...u]=c[s];r=u.length>0?"".concat(l,"(").concat(u.join(","),")"):String(l)}else r=String(c[s]);return Ja.set(t,r),r}))).apply(this,arguments)}function Xa(e,t){var r,n,o,i,s=Ta(t);return(null!==(r=null!==(n=null===(o=s.meta)||void 0===o?void 0:o.injectMenus)&&void 0!==n?n:null===(i=s.meta)||void 0===i?void 0:i.menus)&&void 0!==r?r:[]).filter((t=>t.menuId===e)).map((e=>{var r,n;return(0,a.Z)((0,a.Z)({},e),null!==(r=e.app)&&void 0!==r&&null!==(n=r[0])&&void 0!==n&&n.appId?{}:{app:[{appId:t}]})}))}var eo=["items","app"],to=new Map,ro=new Map;function no(e){return ro.get(e)}function ao(e,t){var r=to.get(e);return r||(r=function(e,t){return oo.apply(this,arguments)}(e,t)),r}function oo(){return(oo=(0,o.Z)((function*(e,t){var r=window.STANDALONE_MICRO_APPS?Xa(e,t.app.id):(yield(0,La.x)("EASYOPS_STORYBOARD_MENU",{page:1,page_size:200,fields:{menuId:!0,title:!0,icon:!0,link:!0,titleDataSource:!0,defaultCollapsed:!0,defaultCollapsedBreakpoint:!0,type:!0,injectMenuGroupId:!0,dynamicItems:!0,itemsResolve:!0,items:!0,i18n:!0,"items.children":!0,"app.appId":!0},query:{menuId:{$eq:e},app:{$size:{$gt:0}}}})).list,n=yield Va(r,t);if(!n)throw new Error("Menu not found: ".concat(e));qa(n);var{items:o,app:s}=n,c=(0,ue.Z)(n,eo),l=(0,a.Z)((0,a.Z)({},t),{},{pendingPermissionsPreCheck:[...t.pendingPermissionsPreCheck,xo([o,c])]});delete l.tplStateStoreId,delete l.forEachItem;var u=s[0].appId,[p,d]=yield Promise.all([Ka(c,u,l),za(o,l)]),f=(0,a.Z)((0,a.Z)({title:yield Ya(p)},(0,i.pick)(p,["icon","link","defaultCollapsed","defaultCollapsedBreakpoint"])),{},{menuItems:d.filter(ot).map((e=>{var t,r=null===(t=e.children)||void 0===t?void 0:t.filter(ot);return"group"===e.type?{type:"group",title:e.text,items:r}:null!=r&&r.length?{type:"subMenu",title:e.text,icon:e.icon,items:r,defaultExpanded:e.defaultExpanded}:e}))});ro.set(e,f)}))).apply(this,arguments)}var io=Symbol.for("pre.evaluated.raw"),so=Symbol.for("pre.evaluated.context");function co(e){return!(null==e||!e[io])}function lo(e){return"string"==typeof e?(0,l.shouldAllowRecursiveEvaluations)(e):(0,l.shouldAllowRecursiveEvaluations)(e[io])}var uo=new WeakSet([SyntaxError,TypeError,ReferenceError]);function po(e){return uo.has(e.constructor)?e.constructor:TypeError}function fo(e,t,r){return vo.apply(this,arguments)}function vo(){return(vo=(0,o.Z)((function*(e,t,r){var{blockingList:n,run:a}=mo(e,t,r,!0);return yield Promise.all(n),a()}))).apply(this,arguments)}function ho(e,t,r){var{run:n}=mo(e,t,r,!1);return n()}function mo(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=[];if("string"!=typeof e){var c=(0,i.omit)(t,["pendingPermissionsPreCheck","tplStateStoreMap","tplStateStoreScope","formStateStoreMap","formStateStoreScope"]);t=(0,a.Z)((0,a.Z)({},e[so]),c),e=e[io]}var p,v={usedArgs:new Set},h={usedArgs:new Set};try{p=(0,l.preevaluate)(e,{withParent:!0,hooks:{beforeVisitGlobal(e,t){Un(v,e,t),jn(h,e,t)}}})}catch(t){var m="".concat(t.message,', in "').concat(e,'"'),y=po(t);throw new y(m)}if(v.hasNonStaticUsage)throw new Error('Non-static usage of "APP.getMenu" is prohibited in v3, check your expression: "'.concat(e,'"'));if(h.hasNonStaticUsage)throw new Error('Non-static usage of "INSTALLED_APPS.has" is prohibited in v3, check your expression: "'.concat(e,'"'));var b,w,E,A,I={},{attemptToVisitGlobals:O}=p;if(r.lazy||O.has("EVENT")&&!(0,u.hasOwnProperty)(t,"event")||O.has("DATA")&&!(0,u.hasOwnProperty)(t,"data"))return{blockingList:o,run:()=>Object.keys(t).length>0?{[io]:e,[so]:t}:e};var T,C,R=gt(t);(O.has("STATE")||!R&&O.has("TPL"))&&(A=St(t,"STATE",': "'.concat(e,'"'))),O.has("FORM_STATE")&&(C=At(t,"FORM_STATE",': "'.concat(e,'"')));var B=P();if(n||B){if(O.has("CTX")&&(b=(0,s.strictCollectMemberUsage)(e,"CTX"),n&&o.push(t.ctxStore.waitFor(b))),A){if(E=(0,s.strictCollectMemberUsage)(e,"STATE"),!R){var _=(0,s.strictCollectMemberUsage)(e,"TPL");for(var L of _)E.add(L)}n&&o.push(A.waitFor(E))}C&&(T=(0,s.strictCollectMemberUsage)(e,"FORM_STATE"),n&&o.push(C.waitFor(T))),O.has("PROCESSORS")&&(w=(0,s.strictCollectMemberUsage)(e,"PROCESSORS",2),n&&o.push((0,d.loadProcessorsImperatively)(w,xa())))}if(n){var M=O.has("PERMISSIONS");if(!M&&O.has("FN")){var F=[...(0,s.strictCollectMemberUsage)(e,"FN")];M=Y(F)}if(M&&o.push(...t.pendingPermissionsPreCheck),v.usedArgs.size>0){var N=[...v.usedArgs];o.push(Promise.all(N.map((e=>ao(e,t)))))}h.usedArgs.size>0&&o.push(qn([...h.usedArgs]))}return{blockingList:o,run(){var r,n,{app:o,location:s,query:c,match:d,flags:v,sys:h,ctxStore:m,data:y,event:P}=t,B=null!==(r=t.overrideApp)&&void 0!==r?r:o;for(var _ of O)switch(_){case"ANCHOR":I[_]=s.hash?s.hash.substring(1):null;break;case"APP":I[_]=(0,a.Z)((0,a.Z)({},(0,i.cloneDeep)(B)),{},{getMenu:no});break;case"CTX":I[_]=Z({get:(e,t)=>m.getValue(t),ownKeys:()=>Array.from(b)});break;case"DATA":I[_]=y;break;case"EVENT":I[_]=P;break;case"FLAGS":I[_]=x(v);break;case"FORM_STATE":I[_]=Z({get:(e,t)=>C.getValue(t),ownKeys:()=>Array.from(T)});break;case"HASH":I[_]=s.hash;break;case"INSTALLED_APPS":I[_]=x({has:Wn});break;case"ITEM":(0,u.hasOwnProperty)(t,"forEachItem")?I[_]=t.forEachItem:console.error('Using `ITEM` but no `:forEach` is found, check your expression: "'.concat(e,'"'));break;case"LOCAL_STORAGE":I[_]=x({getItem:ie("local")});break;case"MEDIA":I[_]=x(oe());break;case"MISC":I[_]=ka().getMiscSettings();break;case"PARAMS":I[_]=new URLSearchParams(c);break;case"PATH":I[_]=x(null!==(n=null==d?void 0:d.params)&&void 0!==n?n:{});break;case"PATH_NAME":I[_]=s.pathname;break;case"PROCESSORS":I[_]=Z({get(e,t){var r=g.get(t);if(!r)throw new Error("'PROCESSORS.".concat(t,"' is not registered! Have you installed the relevant brick package?"));return Z({get:(e,t)=>r.get(t),ownKeys:()=>Array.from(r.keys())})},ownKeys:()=>Array.from(w)});break;case"QUERY":I[_]=Object.fromEntries(Array.from(c.keys()).map((e=>[e,c.get(e)])));break;case"QUERY_ARRAY":I[_]=Object.fromEntries(Array.from(c.keys()).map((e=>[e,c.getAll(e)])));break;case"SESSION_STORAGE":I[_]=x({getItem:ie("session")});break;case"TPL":if(yt(R,'Using "TPL" in expression','check your expression: "'.concat(e,'"')),R)break;case"STATE":I[_]=Z({get:(e,t)=>A.getValue(t),ownKeys:()=>Array.from(E)});break;case"SYS":I[_]=x(null!=h?h:{});break;case"__WIDGET_FN__":I[_]=Ba;break;case"__WIDGET_IMG__":I[_]=k;break;case"__WIDGET_I18N__":I[_]=S}Object.assign(I,q(p.attemptToVisitGlobals,{storyboardFunctions:G,app:t.app,appendI18nNamespace:t.appendI18nNamespace}));try{return(0,l.cook)(p.expression,p.source,{globalVariables:(0,f.supply)(p.attemptToVisitGlobals,I)})}catch(t){var L="".concat(t.message,', in "').concat(e,'"');throw new(po(t))(L)}}}}function go(e,t){return yo.apply(this,arguments)}function yo(){return yo=(0,o.Z)((function*(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=co(e);if(n||"string"==typeof e){var a,o=r.$$lazyForUseBrick&&ut(r.$$stateOfUseBrick),i=o;return n||(0,l.isEvaluable)(e)?(a=yield fo(e,t,{lazy:o}),i=lo(e)):a=o?e:((0,u.hasOwnProperty)(t,"data")?r.noInject?p.transform:p.transformAndInject:r.noInject?Eo:p.inject)(e,t),i||Zn(a),a}if(!(0,u.isObject)(e)||On(e))return e;if(Array.isArray(e)){var s=wo(r,!0);return Promise.all(e.map((e=>go(e,t,s))))}return Object.fromEntries((yield Promise.all(Object.entries(e).map((e=>{var[n,a]=e;return Promise.all([go(n,t),go(a,t,wo(r,!1,n))])})))).concat(r.ignoreSymbols?[]:Object.getOwnPropertySymbols(e).map((t=>[t,e[t]]))))})),yo.apply(this,arguments)}function bo(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=co(e);if(n||"string"==typeof e){var a,o=r.$$lazyForUseBrick&&ut(r.$$stateOfUseBrick),i=o;return n||(0,l.isEvaluable)(e)?(a=ho(e,t),i=lo(e)):a=o?e:((0,u.hasOwnProperty)(t,"data")?r.noInject?p.transform:p.transformAndInject:r.noInject?Eo:p.inject)(e,t),i||Zn(a),a}if(!(0,u.isObject)(e)||On(e))return e;if(Array.isArray(e)){var s=wo(r,!0);return e.map((e=>bo(e,t,s)))}return Object.fromEntries(Object.entries(e).map((e=>{var[n,a]=e;return[bo(n,t),bo(a,t,wo(r,!1,n))]})).concat(r.ignoreSymbols?[]:Object.getOwnPropertySymbols(e).map((t=>[t,e[t]]))))}function wo(e,t,r){return e.$$lazyForUseBrick?(0,a.Z)((0,a.Z)({},e),{},{$$stateOfUseBrick:pt(e.$$stateOfUseBrick,t,r)}):e}function Eo(e){return e}var So=[],ko=new Map;function Po(e){if(Lo()&&!Bo().isAdmin)return Zo((0,s.scanPermissionActionsInStoryboard)(e))}function Ao(e,t){return Io.apply(this,arguments)}function Io(){return(Io=(0,o.Z)((function*(e,t){if(Lo()&&!Bo().isAdmin&&Array.isArray(e.permissionsPreCheck))return Zo(yield go(e.permissionsPreCheck,t))}))).apply(this,arguments)}function xo(e){if(Lo()&&!Bo().isAdmin)return Zo((0,s.scanPermissionActionsInAny)(e))}function Zo(e){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,o.Z)((function*(e){var t=(0,i.difference)(e,[...So]);if(0!==t.length){So.push(...t);try{var r=yield(0,c.w)({actions:t});for(var n of r.actions)ko.set(n.action,n.authorizationStatus),"undefined"===n.authorizationStatus&&console.error('Undefined permission action: "'.concat(n.action,'"'))}catch(e){console.error("Pre-check permissions failed",e)}}}))).apply(this,arguments)}function To(){if(!Lo())return!1;if(Bo().isAdmin)return!0;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n of t)switch(ko.get(n)){case"unauthorized":case"undefined":return!1;case void 0:return console.error('Un-checked permission action: "'.concat(n,'", please make sure the permission to check is defined in permissionsPreCheck.')),!1}return!0}var Co={};function Ro(e){Object.assign(Co,{org:e.org,username:e.username,userInstanceId:e.userInstanceId,loginFrom:e.loginFrom,accessRule:e.accessRule,isAdmin:e.isAdmin,csrfToken:e.csrfToken,license:e.license,userShowValue:e.userShowValue})}function Bo(){return(0,a.Z)({},Co)}function _o(){for(var e of Object.keys(Co))Co[e]=void 0;So.length=0,ko.clear()}function Lo(){return void 0!==Co.username}function Mo(e,t,r){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,o.Z)((function*(e,t,r){return Xe(yield Ke(e),e,"resolve",t,r)}))).apply(this,arguments)}function No(e){var t,{portal:r,scope:n="fragment",unknownBricks:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r;t=r||(()=>((i=document.createElement("div")).style.position="absolute",i.style.width=i.style.height="0",document.body.append(i),i));var s,c,l=!1;return{render(r){var u=arguments;return(0,o.Z)((function*(){var{theme:o,context:p,functions:f,templates:v,i18n:h}=u.length>1&&void 0!==u[1]?u[1]:{};if(l)throw new Error("The root is unmounted and cannot be rendered any more");var m=[].concat(r),g={ctxStore:new kr("CTX"),pendingPermissionsPreCheck:[],tplStateStoreMap:new Map,formStateStoreMap:new Map},y=s;s=new mn(n,{unknownBricks:a});var w={tag:Br.ROOT,container:e,createPortal:t};if("page"===n){var E,S={id:"demo",homepage:"/demo"};g.app=S;var k={app:S,meta:{i18n:h,customTemplates:v}};null===(E=c)||void 0===E||E(),c=b(k),Cn(k),J(f,S)}g.ctxStore.define(p,g);var P,A=!1;try{P=yield $r(w,m,g,s),(0,d.flushStableLoadBricks)(),yield Promise.all([...P.blockingList,g.ctxStore.waitForAll(),...[...g.tplStateStoreMap.values(),...g.formStateStoreMap.values()].map((e=>e.waitForAll())),...g.pendingPermissionsPreCheck])}catch(e){A=!0,P={node:{tag:Br.BRICK,type:"div",properties:{textContent:Ht(e)},return:w,runtimeContext:null},blockingList:[],menuRequests:[]}}w.child=P.node,null==y||y.dispatchOnUnmount(),null==y||y.dispose(),rn(e),i&&rn(i),"page"===n&&(R(null!=o?o:"light"),U("default"),A||s.dispatchBeforePageLoad(),L(),V()),nn(w),"page"===n&&window.scrollTo(0,0),A||("page"===n&&s.dispatchPageLoad(),s.dispatchOnMount(),s.initializeScrollIntoView(),s.initializeMediaChange())}))()},unmount(){l||(l=!0,rn(e),i&&(rn(i),r||i.remove()))}}}function Uo(e,t){return jo.apply(this,arguments)}function jo(){return(jo=(0,o.Z)((function*(e,t){var r,n,o,i=[],s=[],c=(0,a.Z)((0,a.Z)({},Oa()),{},{data:t,pendingPermissionsPreCheck:[],tplStateStoreScope:i,formStateStoreScope:s});null!==(r=c.tplStateStoreMap)&&void 0!==r||(c.tplStateStoreMap=new Map),null!==(n=c.formStateStoreMap)&&void 0!==n||(c.formStateStoreMap=new Map);var l=new mn("fragment"),u={tag:Br.ROOT,createPortal:null},p=e.transform,f=gt();p&&yt(f,"`useBrick.transform`",'please use "properties" instead, check your useBrick:',e);var v=yield Wr(u,f?e:(0,a.Z)((0,a.Z)({},e),{},{properties:(0,a.Z)((0,a.Z)({},e.properties),p)}),c,l);if((0,d.flushStableLoadBricks)(),yield Promise.all([...v.blockingList,...[...i,...s].map((e=>e.waitForAll())),...c.pendingPermissionsPreCheck]),null!==(o=v.node)&&void 0!==o&&o.portal)throw new Error("The root brick of useBrick cannot be a portal brick");return u.child=v.node,{tagName:v.node?v.node.type:null,renderRoot:u,rendererContext:l}}))).apply(this,arguments)}function Vo(e,t){var r,{renderRoot:n,rendererContext:a}=e;return n.createPortal=()=>{var e=document.querySelector("#portal-mount-point");return r=document.createElement("div"),e.appendChild(r),r},nn(n,t),a.dispatchOnMount(),a.initializeScrollIntoView(),a.initializeMediaChange(),{portal:r}}function Do(e,t){var{rendererContext:r}=e;t.portal&&(rn(t.portal),t.portal.remove()),r.dispatchOnUnmount(),r.dispose()}function $o(e,t,r){if(r)throw new Error("Legacy doTransform does not support options in v3");return bo(t,(0,a.Z)((0,a.Z)({},Oa()),{},{data:e}),{noInject:!0})}function qo(e,t){var r=Ta(e);Object.assign(r,(0,a.Z)((0,a.Z)({},t),{},{$$fulfilling:null,$$fulfilled:!0,$$registerCustomTemplateProcessed:!1})),b(r)}function Wo(e,t){var r=Ta(e),n=!1,a=e=>"".concat(e.path,".").concat(e.exact),o=(e,r)=>e.map((e=>{var i=a(e);return"routes"===e.type?(e.routes=o(e.routes,r),e):i===r?(n=!0,t):e}));r.routes=o(r.routes,a(t)),n||r.routes.unshift(t)}function Ho(e,t,r){var n="".concat(e,".").concat(t.name);Et.define(n,{bricks:t.bricks,proxy:t.proxy,state:t.state}),Ko(e,t.name,r)}function Ko(e,t,r){Jo(e,"${APP.homepage}/_dev_only_/template-preview/".concat(t),[(0,a.Z)({brick:t},(0,i.pick)(r,"properties","events","lifeCycle","context"))])}function zo(e,t){var r;Jo(e,"${APP.homepage}/_dev_only_/snippet-preview/".concat(t.snippetId),null!==(r=t.bricks)&&void 0!==r&&r.length?t.bricks:[{brick:"span"}])}var Go=zo;function Jo(e,t,r){var{routes:n}=Ta(e),a=n.findIndex((e=>e.path===t)),o={path:t,bricks:r,menu:!1,exact:!0};-1===a?n.unshift(o):n.splice(a,1,o)}},7929:(e,t,r)=>{r.r(t),r.d(t,{supply:()=>s});var n=r(3028),a=r(5178),o=r(8874),i=r(5637);function s(e,t,r){var a=(0,n.Z)({},t);for(var o of(a[void 0]=void 0,e))if(!Object.prototype.hasOwnProperty.call(a,o)){var i=p(o,r);void 0!==i&&(a[o]=i)}return a}var c=new Set(["fill","pull","pullAll","pullAllBy","pullAllWith","pullAt","remove","reverse","assign","assignIn","assignInWith","assignWith","defaults","defaultsDeep","merge","mergeWith","set","setWith","unset","update","updateWith","after","ary","before","bind","bindKey","curry","curryRight","debounce","defer","delay","flip","memoize","negate","once","overArgs","partial","partialRight","rearg","rest","spread","throttle","unary","wrap"]),l=new Set(["lang","langData","locale","localeData","defineLocale","updateLocale","updateOffset"]),u=new Set(["Array","Boolean","Date","Infinity","JSON","Math","NaN","Number","String","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","isFinite","isNaN","parseFloat","parseInt","Map","Set","URLSearchParams","WeakMap","WeakSet","atob","btoa"]);function p(e,t){switch(e){case"Object":return r=Object,n=["entries","fromEntries","keys","values"],Object.fromEntries(n.map((e=>[e,function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r[e].apply(r,n)}])));case"_":return Object.fromEntries(Object.entries(a).filter((e=>!c.has(e[0]))).concat(t?[["uniqueId",e=>"".concat(null!=e?e:"","42")]]:[]));case"moment":return Object.assign((function(){return o(...arguments)}),Object.fromEntries(Object.entries(o).filter((e=>!l.has(e[0])))));case"PIPES":return i.q;case"TAG_URL":return d(!0);case"SAFE_TAG_URL":return d();default:if(u.has(e))return window[e]}var r,n}function d(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var o=[];return t.forEach(((t,r)=>{o.push(t),r<n.length&&o.push(e?String(n[r]).replace(/[^/]+/g,(e=>encodeURIComponent(e))):encodeURIComponent(String(n[r])))})),o.join("")}}},8486:(e,t,r)=>{function n(e){return class extends HTMLElement{get $$typeof(){return"provider"}resolve(){return e(...arguments)}}}function a(e){var t=Object.getOwnPropertyNames(e);for(var r of t){var n=e[r];n&&"object"==typeof n&&a(n)}return Object.freeze(e)}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function i(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}r.r(t),r.d(t,{JsonStorage:()=>s,createProviderClass:()=>n,deepFreeze:()=>a,hasOwnProperty:()=>o,isObject:()=>i,unwrapProvider:()=>u});class s{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"brick-next-";this.storage=e,this.prefix=t}setItem(e,t){this.storage.setItem(this.prefix+e,JSON.stringify(t))}getItem(e){var t;return JSON.parse(null!==(t=this.storage.getItem(this.prefix+e))&&void 0!==t?t:"null")}removeItem(e){return this.storage.removeItem(this.prefix+e)}clear(){return this.storage.clear()}}var c=new Map;function l(e){var t=c.get(e);return t||(t=document.createElement(e),c.set(e,t),t)}function u(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=l(e);return a.resolve(...r)}}},6489:(e,t,r)=>{function n(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(a,o){if("string"==typeof t?a.name===t:t.includes(a.name)){for(var i=[],s=1;s<=r;s++){var c=o[o.length-s];if("MemberExpression"===(null==c?void 0:c.node.type)&&"object"===c.key){var l=c.node;l.computed||"Identifier"!==l.property.type?l.computed&&"Literal"===l.property.type&&"string"==typeof l.property.value?i.push(n?"".concat(a.name,".").concat(l.property.value):l.property.value):e.hasNonStaticUsage=!0:i.push(n?"".concat(a.name,".").concat(l.property.name):l.property.name)}else e.hasNonStaticUsage=!0}i.length===r&&e.usedProperties.add(i.join("."))}}}r.r(t),r.d(t,{beforeVisitGlobalMember:()=>n,collectMemberUsage:()=>c,collectMemberUsageInFunction:()=>v,createProviderClass:()=>o.createProviderClass,scanPermissionActionsInAny:()=>y,scanPermissionActionsInStoryboard:()=>g,strictCollectMemberUsage:()=>s,strictCollectMemberUsageInFunction:()=>f,track:()=>l,trackAll:()=>u,traverseStoryboardExpressions:()=>i,traverseStoryboardFunction:()=>d,traverseStoryboardFunctions:()=>p,unwrapProvider:()=>o.unwrapProvider});var a=r(3046),o=r(9686);function i(e,t,r){var n=new WeakSet,{matchExpressionString:i,visitNotMatchedExpressionString:s,visitNonExpressionString:c,visitObject:l}="string"==typeof r?{matchExpressionString:e=>e.includes(r)}:r;!function e(r){if("string"==typeof r)if((0,a.isEvaluable)(r))if(i(r))try{(0,a.preevaluate)(r,{withParent:!0,hooks:{beforeVisitGlobal(e,n){t(e,n,r)}}})}catch(e){console.error("Parse storyboard expression failed:",e)}else null==s||s(r);else null==c||c(r);else if((0,o.isObject)(r)){if(n.has(r))return;for(var u of(n.add(r),null==l||l(r),Array.isArray(r)?r:Object.values(r)))e(u)}}(e)}function s(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{hasNonStaticUsage:n,nonStaticUsage:a,usedProperties:o}=c(e,t,r);if(n)throw new Error("Non-static usage of ".concat(t,' is prohibited, check your expression: "').concat(a,'"'));return o}function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a={usedProperties:new Set,hasNonStaticUsage:!1},o=n(a,t,r);return i(e,((e,t,r)=>{o(e,t),a.hasNonStaticUsage&&(a.nonStaticUsage=r)}),t),a}function l(e,t,r){if(e.includes(t)){var o,i={usedProperties:new Set,hasNonStaticUsage:!1},{expression:s}=(0,a.preevaluate)(e,{withParent:!0,hooks:{beforeVisitGlobal:n(i,r)}});if("SequenceExpression"===s.type&&(o=s.expressions[0])&&"Literal"===o.type&&o.value===t){if(i.usedProperties.size>0)return i.usedProperties;console.warn('You are using "'.concat(t,'" but no `').concat(r,"` usage found in your expression: ").concat(JSON.stringify(e)))}}return!1}function u(e){if(e){var t={usedProperties:new Set,hasNonStaticUsage:!1};if((0,a.preevaluate)(e,{withParent:!0,hooks:{beforeVisitGlobal:n(t,["CTX","STATE","FORM_STATE"],1,!0)}}),t.usedProperties.size>0){var r=[...t.usedProperties],o={context:!1,state:!1,formState:!1},i={CTX:"context",STATE:"state",FORM_STATE:"formState"};return r.forEach((e=>{var[t,r]=e.split(".");o[i[t]]||(o[i[t]]=[]),o[i[t]].push(r)})),o}console.warn('You are using track all but no "CTX" or "STATE" or "FORM_STATE" usage found in your expression: '.concat(JSON.stringify(e)))}return!1}function p(e,t){if(Array.isArray(e))for(var r of e)d(r,t)}function d(e,t){try{(0,a.precookFunction)(e.source,{typescript:e.typescript,withParent:!0,hooks:{beforeVisitGlobal:t}})}catch(t){console.error('Parse storyboard function "'.concat(e.name,'" failed:'),t)}}function f(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{hasNonStaticUsage:n,usedProperties:a}=v(e,t,r);if(n)throw new Error("Non-static usage of ".concat(t,' is prohibited, check your function: "').concat(e.name,'"'));return a}function v(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a={usedProperties:new Set,hasNonStaticUsage:!1};return d(e,n(a,t,r)),a.usedProperties.delete(e.name),a}var h="PERMISSIONS",m="check";function g(e){var t,r=new Set,n=b(r),{customTemplates:a,functions:o}=null!==(t=e.meta)&&void 0!==t?t:{};return i([e.routes,a],n,h),p(o,n),Array.from(r)}function y(e){var t=new Set;return i(e,b(t),h),Array.from(t)}function b(e){return function(t,r){if(t.name===h){var n=r[r.length-1],a=r[r.length-2];if("CallExpression"===(null==a?void 0:a.node.type)&&"callee"===(null==a?void 0:a.key)&&"MemberExpression"===(null==n?void 0:n.node.type)&&"object"===n.key&&(n.node.computed?"Literal"===n.node.property.type&&n.node.property.value===m:"Identifier"===n.node.property.type&&n.node.property.name===m))for(var o of a.node.arguments)"Literal"===o.type&&"string"==typeof o.value&&e.add(o.value)}}}}}]);
//# sourceMappingURL=core.5719cb37.js.map